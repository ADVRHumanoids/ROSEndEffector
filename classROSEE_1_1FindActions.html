<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ROSEndEffector: ROSEE::FindActions Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ROSEndEffector
   </div>
   <div id="projectbrief">ROS End-Effector package: provides a ROS-based set of standard interfaces to command robotics end-effectors in an agnostic fashion.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceROSEE.html">ROSEE</a></li><li class="navelem"><a class="el" href="classROSEE_1_1FindActions.html">FindActions</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classROSEE_1_1FindActions-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ROSEE::FindActions Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to check which fingertips collide (for the pinch action at the moment)  
 <a href="classROSEE_1_1FindActions.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="FindActions_8h_source.html">FindActions.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for ROSEE::FindActions:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classROSEE_1_1FindActions__coll__graph.svg" width="264" height="803"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a35ac5ca831a609a4f19da84f5ad40126"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#a35ac5ca831a609a4f19da84f5ad40126">FindActions</a> (std::shared_ptr&lt; <a class="el" href="classROSEE_1_1ParserMoveIt.html">ROSEE::ParserMoveIt</a> &gt; parserMoveit)</td></tr>
<tr class="separator:a35ac5ca831a609a4f19da84f5ad40126"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85a70cb8d125f8130b0c0de0ce3704bf"><td class="memItemLeft" align="right" valign="top">std::pair&lt; std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchTight.html">ROSEE::ActionPinchTight</a> &gt;, std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#a85a70cb8d125f8130b0c0de0ce3704bf">findPinch</a> (std::string path2saveYaml)</td></tr>
<tr class="memdesc:a85a70cb8d125f8130b0c0de0ce3704bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to look for pinches, both Tight and Loose ones.  <a href="#a85a70cb8d125f8130b0c0de0ce3704bf">More...</a><br /></td></tr>
<tr class="separator:a85a70cb8d125f8130b0c0de0ce3704bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a868959109bf6094988ec01f364dc33be"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::set&lt; std::string &gt;, <a class="el" href="classROSEE_1_1ActionMultiplePinchTight.html">ROSEE::ActionMultiplePinchTight</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#a868959109bf6094988ec01f364dc33be">findMultiplePinch</a> (unsigned int nFinger, std::string path2saveYaml, bool strict=true)</td></tr>
<tr class="memdesc:a868959109bf6094988ec01f364dc33be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finder for MultiplePinch (a pinch done with more than 2 finger).  <a href="#a868959109bf6094988ec01f364dc33be">More...</a><br /></td></tr>
<tr class="separator:a868959109bf6094988ec01f364dc33be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6ed5639dd6cfde29f245cfc4a2d376c"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <a class="el" href="classROSEE_1_1ActionTrig.html">ROSEE::ActionTrig</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#aa6ed5639dd6cfde29f245cfc4a2d376c">findTrig</a> (<a class="el" href="classROSEE_1_1ActionPrimitive.html#a7c9f67521f5ae68df2a8252853b5f3ee">ROSEE::ActionPrimitive::Type</a> actionType, std::string path2saveYaml)</td></tr>
<tr class="memdesc:aa6ed5639dd6cfde29f245cfc4a2d376c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to look for trigs (trig, tipFlex and fingFlex).  <a href="#aa6ed5639dd6cfde29f245cfc4a2d376c">More...</a><br /></td></tr>
<tr class="separator:aa6ed5639dd6cfde29f245cfc4a2d376c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac10acdf095562888499f08e7e23ceb83"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <a class="el" href="classROSEE_1_1ActionSingleJointMultipleTips.html">ROSEE::ActionSingleJointMultipleTips</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#ac10acdf095562888499f08e7e23ceb83">findSingleJointMultipleTips</a> (unsigned int nFinger, std::string path2saveYaml)</td></tr>
<tr class="separator:ac10acdf095562888499f08e7e23ceb83"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a30f514433db039df66f9df4ebf8c2f53"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchTight.html">ROSEE::ActionPinchTight</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#a30f514433db039df66f9df4ebf8c2f53">checkCollisions</a> ()</td></tr>
<tr class="memdesc:a30f514433db039df66f9df4ebf8c2f53"><td class="mdescLeft">&#160;</td><td class="mdescRight">principal function which check for collisions with moveit functions when looking for tight pinches  <a href="#a30f514433db039df66f9df4ebf8c2f53">More...</a><br /></td></tr>
<tr class="separator:a30f514433db039df66f9df4ebf8c2f53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac19cc1727aa6c9a19aaee7f19e743032"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#ac19cc1727aa6c9a19aaee7f19e743032">checkDistances</a> (std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a> &gt; *mapOfLoosePinches)</td></tr>
<tr class="memdesc:ac19cc1727aa6c9a19aaee7f19e743032"><td class="mdescLeft">&#160;</td><td class="mdescRight">Principal function which fill the <code>mapOfLoosePinches</code> basing on minumun distance between tips.  <a href="#ac19cc1727aa6c9a19aaee7f19e743032">More...</a><br /></td></tr>
<tr class="separator:ac19cc1727aa6c9a19aaee7f19e743032"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea435622ef79d13cf11577cd009694da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#aea435622ef79d13cf11577cd009694da">checkWhichTipsCollideWithoutBounds</a> (std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a> &gt; *mapOfLoosePinches)</td></tr>
<tr class="memdesc:aea435622ef79d13cf11577cd009694da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function similar to <a class="el" href="classROSEE_1_1FindActions.html#a30f514433db039df66f9df4ebf8c2f53">checkCollisions</a> but used for Loose Pinches.  <a href="#aea435622ef79d13cf11577cd009694da">More...</a><br /></td></tr>
<tr class="separator:aea435622ef79d13cf11577cd009694da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae461c8c4615de0f67eb471e82f7133b0"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::set&lt; std::string &gt;, <a class="el" href="classROSEE_1_1ActionMultiplePinchTight.html">ROSEE::ActionMultiplePinchTight</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#ae461c8c4615de0f67eb471e82f7133b0">checkCollisionsForMultiplePinch</a> (unsigned int nFinger, bool strict)</td></tr>
<tr class="memdesc:ae461c8c4615de0f67eb471e82f7133b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">support function for <a class="el" href="classROSEE_1_1FindActions.html#a868959109bf6094988ec01f364dc33be">findMultiplePinch</a> (a pinch done with more than 2 finger).  <a href="#ae461c8c4615de0f67eb471e82f7133b0">More...</a><br /></td></tr>
<tr class="separator:ae461c8c4615de0f67eb471e82f7133b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7e8531675bfe6581764bf289fa7f4ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#ac7e8531675bfe6581764bf289fa7f4ac">removeBoundsOfNotCollidingTips</a> (const std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a> &gt; *mapOfLoosePinches, robot_model::RobotModelPtr kinematic_model_noBound)</td></tr>
<tr class="memdesc:ac7e8531675bfe6581764bf289fa7f4ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Support function to remove the joint limits from the model.  <a href="#ac7e8531675bfe6581764bf289fa7f4ac">More...</a><br /></td></tr>
<tr class="separator:ac7e8531675bfe6581764bf289fa7f4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7141bfe37eec208d8d8ec4a46905414b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#a7141bfe37eec208d8d8ec4a46905414b">fillNotCollidingTips</a> (std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a> &gt; *mapOfLoosePinches, const std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchTight.html">ROSEE::ActionPinchTight</a> &gt; *mapOfPinches)</td></tr>
<tr class="memdesc:a7141bfe37eec208d8d8ec4a46905414b"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to "initialize" the map of <a class="el" href="classROSEE_1_1ActionPinchLoose.html" title="The action of pinch with two tips. ">ActionPinchLoose</a> <code>mapOfLoosePinches</code>.  <a href="#a7141bfe37eec208d8d8ec4a46905414b">More...</a><br /></td></tr>
<tr class="separator:a7141bfe37eec208d8d8ec4a46905414b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7db3c0d1f01f30e3fb54360e7d309719"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#a7db3c0d1f01f30e3fb54360e7d309719">changeFingertipsToFingerNames</a> (std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchTight.html">ROSEE::ActionPinchTight</a> &gt; *mapOfPinches, std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a> &gt; *mapOfLoosePinches)</td></tr>
<tr class="memdesc:a7db3c0d1f01f30e3fb54360e7d309719"><td class="mdescLeft">&#160;</td><td class="mdescRight">this function take the two tight and loose maps and change the keys from fingertips names to their finger names.  <a href="#a7db3c0d1f01f30e3fb54360e7d309719">More...</a><br /></td></tr>
<tr class="separator:a7db3c0d1f01f30e3fb54360e7d309719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc48c48e3f087744d53123cfb69b8866"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <a class="el" href="classROSEE_1_1ActionTrig.html">ActionTrig</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#afc48c48e3f087744d53123cfb69b8866">trig</a> ()</td></tr>
<tr class="memdesc:afc48c48e3f087744d53123cfb69b8866"><td class="mdescLeft">&#160;</td><td class="mdescRight">trig is the action of closing a SINGLE finger towards the palm.  <a href="#afc48c48e3f087744d53123cfb69b8866">More...</a><br /></td></tr>
<tr class="separator:afc48c48e3f087744d53123cfb69b8866"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8902b1bc633494a1f8acfb9ab9bfaedb"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <a class="el" href="classROSEE_1_1ActionTrig.html">ROSEE::ActionTrig</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#a8902b1bc633494a1f8acfb9ab9bfaedb">tipFlex</a> ()</td></tr>
<tr class="memdesc:a8902b1bc633494a1f8acfb9ab9bfaedb"><td class="mdescLeft">&#160;</td><td class="mdescRight">We start from each tip.  <a href="#a8902b1bc633494a1f8acfb9ab9bfaedb">More...</a><br /></td></tr>
<tr class="separator:a8902b1bc633494a1f8acfb9ab9bfaedb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fb89f3655535412affb69319be096dd"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <a class="el" href="classROSEE_1_1ActionTrig.html">ROSEE::ActionTrig</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#a1fb89f3655535412affb69319be096dd">fingFlex</a> ()</td></tr>
<tr class="memdesc:a1fb89f3655535412affb69319be096dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">We start from each tip.  <a href="#a1fb89f3655535412affb69319be096dd">More...</a><br /></td></tr>
<tr class="separator:a1fb89f3655535412affb69319be096dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebab07638c045644684c21df82314815"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#aebab07638c045644684c21df82314815">insertJointPosForTrigInMap</a> (std::map&lt; std::string, <a class="el" href="classROSEE_1_1ActionTrig.html">ActionTrig</a> &gt; &amp;trigMap, <a class="el" href="classROSEE_1_1ActionTrig.html">ROSEE::ActionTrig</a> action, std::string jointName, double trigValue)</td></tr>
<tr class="memdesc:aebab07638c045644684c21df82314815"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert/update an <a class="el" href="classROSEE_1_1ActionTrig.html" title="The action of moving some joints (see later) of a single finger in a full clousure position towards t...">ActionTrig</a> in the <code>trigMap</code>.  <a href="#aebab07638c045644684c21df82314815">More...</a><br /></td></tr>
<tr class="separator:aebab07638c045644684c21df82314815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d0468e304e350ccacc845f304c15011"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">ROSEE::JointsInvolvedCount</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#a5d0468e304e350ccacc845f304c15011">setOnlyDependentJoints</a> (std::pair&lt; std::string, std::string &gt; tipsNames, <a class="el" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> *jPos)</td></tr>
<tr class="memdesc:a5d0468e304e350ccacc845f304c15011"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the contact, we want to know the state of the joint to replicate it.  <a href="#a5d0468e304e350ccacc845f304c15011">More...</a><br /></td></tr>
<tr class="separator:a5d0468e304e350ccacc845f304c15011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a512ae13abb9d5249689b0b11d02f8f18"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">ROSEE::JointsInvolvedCount</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#a512ae13abb9d5249689b0b11d02f8f18">setOnlyDependentJoints</a> (std::set&lt; std::string &gt; tipsNames, <a class="el" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> *jPos)</td></tr>
<tr class="memdesc:a512ae13abb9d5249689b0b11d02f8f18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set to default pos the joints that do not move any of the tip included in the set.  <a href="#a512ae13abb9d5249689b0b11d02f8f18">More...</a><br /></td></tr>
<tr class="separator:a512ae13abb9d5249689b0b11d02f8f18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e1b6fa10b919efa6b18501ef43c618"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#ae2e1b6fa10b919efa6b18501ef43c618">getConvertedJointPos</a> (const robot_state::RobotState *kinematic_state)</td></tr>
<tr class="memdesc:ae2e1b6fa10b919efa6b18501ef43c618"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility function to take the actuated joint positions from a <code>kinematic_state</code> and returns the same info as a <a class="el" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> map.  <a href="#ae2e1b6fa10b919efa6b18501ef43c618">More...</a><br /></td></tr>
<tr class="separator:ae2e1b6fa10b919efa6b18501ef43c618"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a781fb80ad06e438bcdd88c9459d67a70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#a781fb80ad06e438bcdd88c9459d67a70">setToDefaultPositionPassiveJoints</a> (moveit::core::RobotState *kinematic_state)</td></tr>
<tr class="memdesc:a781fb80ad06e438bcdd88c9459d67a70"><td class="mdescLeft">&#160;</td><td class="mdescRight">set to <a class="el" href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a> all the passive joints (defined so in the urdf file).  <a href="#a781fb80ad06e438bcdd88c9459d67a70">More...</a><br /></td></tr>
<tr class="separator:a781fb80ad06e438bcdd88c9459d67a70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d2146904b7b7aa947cda5d60f6a9bf"><td class="memItemLeft" align="right" valign="top">std::pair&lt; std::string, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#ac5d2146904b7b7aa947cda5d60f6a9bf">getFingersPair</a> (std::pair&lt; std::string, std::string &gt; tipsPair) const </td></tr>
<tr class="memdesc:ac5d2146904b7b7aa947cda5d60f6a9bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Giving as argument a pair of fingertips, this function return a pair of fingers that are the fingers which the two tips belong to.  <a href="#ac5d2146904b7b7aa947cda5d60f6a9bf">More...</a><br /></td></tr>
<tr class="separator:ac5d2146904b7b7aa947cda5d60f6a9bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac93535bb56de645f32ceeb74bcc70a4e"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#ac93535bb56de645f32ceeb74bcc70a4e">getFingersSet</a> (std::set&lt; std::string &gt; tipsSet) const </td></tr>
<tr class="memdesc:ac93535bb56de645f32ceeb74bcc70a4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used when looking for multiple pinches.  <a href="#ac93535bb56de645f32ceeb74bcc70a4e">More...</a><br /></td></tr>
<tr class="separator:ac93535bb56de645f32ceeb74bcc70a4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1b20ab5d24ddb2abf039292cb1fa5a6"><td class="memItemLeft" align="right" valign="top">std::pair&lt; std::string, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#ac1b20ab5d24ddb2abf039292cb1fa5a6">getFingertipsPair</a> (std::pair&lt; std::string, std::string &gt; fingersPair) const </td></tr>
<tr class="memdesc:ac1b20ab5d24ddb2abf039292cb1fa5a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the fingersPair, this function return the pair of their fingers, in lexicographical order.  <a href="#ac1b20ab5d24ddb2abf039292cb1fa5a6">More...</a><br /></td></tr>
<tr class="separator:ac1b20ab5d24ddb2abf039292cb1fa5a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5331a455d5e499a01e0ad2e4af93d5b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#a5331a455d5e499a01e0ad2e4af93d5b6">setToRandomPositions</a> (robot_state::RobotState *kinematic_state)</td></tr>
<tr class="memdesc:a5331a455d5e499a01e0ad2e4af93d5b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function set the random position of joint considering:  <a href="#a5331a455d5e499a01e0ad2e4af93d5b6">More...</a><br /></td></tr>
<tr class="separator:a5331a455d5e499a01e0ad2e4af93d5b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a4896943527c13a92d19e94ed4bd8cdd9"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classROSEE_1_1ParserMoveIt.html">ROSEE::ParserMoveIt</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a></td></tr>
<tr class="separator:a4896943527c13a92d19e94ed4bd8cdd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab51478600e8d0f0b4b55cdfa4baa0c14"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, std::pair&lt; std::string, std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classROSEE_1_1FindActions.html#ab51478600e8d0f0b4b55cdfa4baa0c14">mimicNLRelMap</a></td></tr>
<tr class="separator:ab51478600e8d0f0b4b55cdfa4baa0c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to check which fingertips collide (for the pinch action at the moment) </p>
<dl class="section warning"><dt>Warning</dt><dd>there is a problem with collisions: with the schunk hand, if we move only the middle (base phalange) toward the hand, a collision between index tip, middle tip and ring tip is detected. Easy reproducible with the moveit assistant, in the set pose section (it find a collision when visually is not present, when we move the middle). There are some caotic printing in bugmoveit branch, to replicate the problem also with this code. I dont know if it is a problem of schunk model, moveit, or both. </dd></dl>

<p>Definition at line <a class="el" href="FindActions_8h_source.html#l00036">36</a> of file <a class="el" href="FindActions_8h_source.html">FindActions.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a35ac5ca831a609a4f19da84f5ad40126"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROSEE::FindActions::FindActions </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classROSEE_1_1ParserMoveIt.html">ROSEE::ParserMoveIt</a> &gt;&#160;</td>
          <td class="paramname"><em>parserMoveit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00003">3</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                                                                                {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    this-&gt;<a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a> = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    </div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    this-&gt;<a class="code" href="classROSEE_1_1FindActions.html#ab51478600e8d0f0b4b55cdfa4baa0c14">mimicNLRelMap</a> = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getMimicNLFatherOfJointMap();</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;}</div><div class="ttc" id="classROSEE_1_1FindActions_html_ab51478600e8d0f0b4b55cdfa4baa0c14"><div class="ttname"><a href="classROSEE_1_1FindActions.html#ab51478600e8d0f0b4b55cdfa4baa0c14">ROSEE::FindActions::mimicNLRelMap</a></div><div class="ttdeci">std::map&lt; std::string, std::pair&lt; std::string, std::string &gt; &gt; mimicNLRelMap</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00087">FindActions.h:87</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a7db3c0d1f01f30e3fb54360e7d309719"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ROSEE::FindActions::changeFingertipsToFingerNames </td>
          <td>(</td>
          <td class="paramtype">std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchTight.html">ROSEE::ActionPinchTight</a> &gt; *&#160;</td>
          <td class="paramname"><em>mapOfPinches</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a> &gt; *&#160;</td>
          <td class="paramname"><em>mapOfLoosePinches</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>this function take the two tight and loose maps and change the keys from fingertips names to their finger names. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mapOfLoosePinches</td><td>[out] Pointer to the map of <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ActionPinchLoose</a> </td></tr>
    <tr><td class="paramname">mapOfPinches</td><td>[out] pointer to the map of <a class="el" href="classROSEE_1_1ActionPinchTight.html">ActionPinchTight</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>The order in the pair is lexicographical so the first finger in the pair can refer to the second tip in the old key pair </dd></dl>

</div>
</div>
<a class="anchor" id="a30f514433db039df66f9df4ebf8c2f53"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchTight.html">ROSEE::ActionPinchTight</a> &gt; ROSEE::FindActions::checkCollisions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>principal function which check for collisions with moveit functions when looking for tight pinches </p>
<dl class="section return"><dt>Returns</dt><dd>the map of <a class="el" href="classROSEE_1_1ActionPinchTight.html" title="The action of pinch with two tips. ">ActionPinchTight</a> </dd></dl>
<p>create the actionPinch </p>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00249">249</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                                                                                     {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    </div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    std::map &lt; std::pair &lt;std::string, std::string&gt; , <a class="code" href="classROSEE_1_1ActionPinchTight.html">ROSEE::ActionPinchTight</a> &gt; mapOfPinches;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    </div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    planning_scene::PlanningScene planning_scene ( <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getRobotModel() );</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    collision_detection::CollisionRequest collision_request;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    collision_detection::CollisionResult collision_result;                       <span class="comment">// std::cout &lt;&lt; &quot;before&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                       <span class="comment">// kinematic_state.printStatePositions();</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                        <span class="comment">//std::vector&lt;double&gt; one_dof;</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                       <span class="comment">// one_dof.push_back (1);</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                      <span class="comment">// kinematic_state.setJointPositions(&quot;SFP1_1__SFP1_2&quot;, one_dof);</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                       <span class="comment">// std::cout &lt;&lt; &quot;after&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                       <span class="comment">// kinematic_state.printStatePositions();</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    collision_request.contacts = <span class="keyword">true</span>;  <span class="comment">//set to compute collisions</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    collision_request.max_contacts = 1000;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    </div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// Consider only collisions among fingertips </span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// If an object pair does not appear in the acm, it is assumed that collisions between those </span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// objects is no tolerated. So we must fill it with all the nonFingertips</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    </div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    collision_detection::AllowedCollisionMatrix acm;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    acm.setEntry(<a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getRobotModel()-&gt;getLinkModelNames(), </div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                 <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getRobotModel()-&gt;getLinkModelNames(), <span class="keyword">true</span>); <span class="comment">//true==not considered collisions</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    acm.setEntry(<a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipNames(), </div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                 <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipNames(), <span class="keyword">false</span>); <span class="comment">//false== considered collisions</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    robot_state::RobotState kinematic_state(<a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getRobotModel());</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        </div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="FindActions_8h.html#afe393eb6f0261bf94bc886a6558c3973">N_EXP_COLLISION</a>; i++){</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        </div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        std::stringstream logCollision;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        collision_result.clear();</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        </div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <a class="code" href="classROSEE_1_1FindActions.html#a5331a455d5e499a01e0ad2e4af93d5b6">setToRandomPositions</a>(&amp;kinematic_state);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        planning_scene.checkSelfCollision(collision_request, collision_result, kinematic_state, acm);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        </div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">if</span> (collision_result.collision) { </div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            </div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="comment">//for each collision with this joints state...</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> cont : collision_result.contacts){</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                </div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <span class="comment">//store joint states</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                <a class="code" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> jointPos = <a class="code" href="classROSEE_1_1FindActions.html#ae2e1b6fa10b919efa6b18501ef43c618">getConvertedJointPos</a>(&amp;kinematic_state);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                <span class="comment">//moveit contacts is a map between a pair (2 strings with link names) and a vector of Contact object ?? I don&#39;t know why the contact is a vector, I have always find only one element            </span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                logCollision &lt;&lt; <span class="stringliteral">&quot;[FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;] Collision between &quot;</span> &lt;&lt; cont.first.first &lt;&lt; <span class="stringliteral">&quot; and &quot;</span> &lt;&lt; </div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                                                    cont.first.second &lt;&lt; std::endl;                                </div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <span class="keywordflow">for</span> (<span class="keyword">auto</span> contInfo : cont.second){ </div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                    logCollision &lt;&lt; <span class="stringliteral">&quot;\tWith a depth of contact: &quot;</span> &lt;&lt; contInfo.depth;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <a class="code" href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">JointsInvolvedCount</a> jointsInvolvedCount = <a class="code" href="classROSEE_1_1FindActions.html#a5d0468e304e350ccacc845f304c15011">setOnlyDependentJoints</a>(cont.first, &amp;jointPos);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                </div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="comment">// get the finger name</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <span class="keyword">auto</span> fingerPair = <a class="code" href="classROSEE_1_1FindActions.html#ac5d2146904b7b7aa947cda5d60f6a9bf">getFingersPair</a>(cont.first);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                ActionPinchTight pinch (fingerPair, jointPos, cont.second.at(0) );</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                pinch.setJointsInvolvedCount ( jointsInvolvedCount );</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <span class="keyword">auto</span> itFind = mapOfPinches.find ( fingerPair );</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                <span class="keywordflow">if</span> ( itFind == mapOfPinches.end() ) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                    <span class="comment">//if here, we have to create store the new created action</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                    mapOfPinches.insert ( std::make_pair (fingerPair, pinch) );</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                    logCollision &lt;&lt; <span class="stringliteral">&quot;, NEW INSERTION&quot;</span>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                } <span class="keywordflow">else</span> { <span class="comment">//Check if it is the best depth among the found collision among that pair</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                    <span class="keywordflow">if</span> (itFind-&gt;second.insertActionState( jointPos, cont.second.at(0)) ) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                         logCollision &lt;&lt; <span class="stringliteral">&quot;, NEW INSERTION&quot;</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                    }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                logCollision &lt;&lt; std::endl;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                logCollision &lt;&lt; jointPos;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="comment">//this print is for debugging purposes</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <span class="comment">//std::cout &lt;&lt; logCollision.str() &lt;&lt; std::endl;</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        }            </div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    </div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">return</span> mapOfPinches;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div><div class="ttc" id="FindActions_8h_html_afe393eb6f0261bf94bc886a6558c3973"><div class="ttname"><a href="FindActions_8h.html#afe393eb6f0261bf94bc886a6558c3973">N_EXP_COLLISION</a></div><div class="ttdeci">#define N_EXP_COLLISION</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00018">FindActions.h:18</a></div></div>
<div class="ttc" id="namespaceROSEE_html_a2d8b470e322232ab96bc71c529edb040"><div class="ttname"><a href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">ROSEE::JointPos</a></div><div class="ttdeci">std::map&lt; std::string, std::vector&lt; double &gt; &gt; JointPos</div><div class="ttdoc">The map to describe the position of all actuated joints. </div><div class="ttdef"><b>Definition:</b> <a href="Action_8h_source.html#l00040">Action.h:40</a></div></div>
<div class="ttc" id="namespaceROSEE_html_aa3b40db1c90a37577a4efc8b3b159e7d"><div class="ttname"><a href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">ROSEE::JointsInvolvedCount</a></div><div class="ttdeci">std::map&lt; std::string, unsigned int &gt; JointsInvolvedCount</div><div class="ttdoc">The map to describe, how many times a joint is set by the action. </div><div class="ttdef"><b>Definition:</b> <a href="Action_8h_source.html#l00063">Action.h:63</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_ac5d2146904b7b7aa947cda5d60f6a9bf"><div class="ttname"><a href="classROSEE_1_1FindActions.html#ac5d2146904b7b7aa947cda5d60f6a9bf">ROSEE::FindActions::getFingersPair</a></div><div class="ttdeci">std::pair&lt; std::string, std::string &gt; getFingersPair(std::pair&lt; std::string, std::string &gt; tipsPair) const </div><div class="ttdoc">Giving as argument a pair of fingertips, this function return a pair of fingers that are the fingers ...</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00887">FindActions.cpp:887</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_ae2e1b6fa10b919efa6b18501ef43c618"><div class="ttname"><a href="classROSEE_1_1FindActions.html#ae2e1b6fa10b919efa6b18501ef43c618">ROSEE::FindActions::getConvertedJointPos</a></div><div class="ttdeci">JointPos getConvertedJointPos(const robot_state::RobotState *kinematic_state)</div><div class="ttdoc">Utility function to take the actuated joint positions from a kinematic_state and returns the same inf...</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00705">FindActions.cpp:705</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a5331a455d5e499a01e0ad2e4af93d5b6"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a5331a455d5e499a01e0ad2e4af93d5b6">ROSEE::FindActions::setToRandomPositions</a></div><div class="ttdeci">void setToRandomPositions(robot_state::RobotState *kinematic_state)</div><div class="ttdoc">This function set the random position of joint considering: </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00826">FindActions.cpp:826</a></div></div>
<div class="ttc" id="classROSEE_1_1ActionPinchTight_html"><div class="ttname"><a href="classROSEE_1_1ActionPinchTight.html">ROSEE::ActionPinchTight</a></div><div class="ttdoc">The action of pinch with two tips. </div><div class="ttdef"><b>Definition:</b> <a href="ActionPinchTight_8h_source.html#l00040">ActionPinchTight.h:40</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a5d0468e304e350ccacc845f304c15011"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a5d0468e304e350ccacc845f304c15011">ROSEE::FindActions::setOnlyDependentJoints</a></div><div class="ttdeci">ROSEE::JointsInvolvedCount setOnlyDependentJoints(std::pair&lt; std::string, std::string &gt; tipsNames, JointPos *jPos)</div><div class="ttdoc">Given the contact, we want to know the state of the joint to replicate it. </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00746">FindActions.cpp:746</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae461c8c4615de0f67eb471e82f7133b0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; std::set&lt; std::string &gt;, <a class="el" href="classROSEE_1_1ActionMultiplePinchTight.html">ROSEE::ActionMultiplePinchTight</a> &gt; ROSEE::FindActions::checkCollisionsForMultiplePinch </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nFinger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>strict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>support function for <a class="el" href="classROSEE_1_1FindActions.html#a868959109bf6094988ec01f364dc33be">findMultiplePinch</a> (a pinch done with more than 2 finger). </p>
<p>This is done similarly to normal pinch, but there are more checks to see if the collision is among more than only two fingertips.</p>
<p>Moveit, when looking for collisions, return only pairs of links that collide. So we need to handle all the found pairs and "put them togheter" in someway. We need at least </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nFinger</td><td>- 1 collision: eg. for triPinch -&gt; 2collision, for 4finger pinch -&gt; 3 collision. But, with only this check, we can also find a configuration whith two distint normal pinch. To solve, we also check if the number of tips that collide in this configuration is exaclty </td></tr>
    <tr><td class="paramname">nFinger,eg</td><td>with 2 collision we can have 4 finger colliding because there are two normal distinct pinch and not a 3-pinch... so we exlude these collisions. The </td></tr>
    <tr><td class="paramname">strict</td><td>can solves another problem. If it is true (default) we take only the multiple pinch where each finger collide with all the other finger involved in the pinch. If it is false, we can find also pinch where the tips are "in line" : finger_2 collide with finger_1 and finger_3, but finger_1 and 3 do not collide. With strict we will find less groups of fingers that collide, but, in someway, they collide "better".</td></tr>
    <tr><td class="paramname">nFinger</td><td>(2 &lt; nFinger &lt;= max_finger). The type of the multiple pinch that we want. The name of the returned action will be based on this param : "MultiplePinchTight-(nFinger)" </td></tr>
    <tr><td class="paramname">strict</td><td>true to look only for "strict" multiple pinch. Look this funcion description </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A map with as keys set of size nFinger, and as value an <a class="el" href="classROSEE_1_1ActionMultiplePinchTight.html">ActionMultiplePinchTight</a> object </dd></dl>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00499">499</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                                                                                                                                            {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    </div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    std::map &lt; std::set &lt;std::string&gt; , <a class="code" href="classROSEE_1_1ActionMultiplePinchTight.html">ROSEE::ActionMultiplePinchTight</a> &gt; mapOfMultPinches;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    </div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nMinCollision =  strict ? </div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <a class="code" href="namespaceROSEE_1_1Utils.html#aba8b2baa6146311f3b05224f84edef23">ROSEE::Utils::binomial_coefficent</a>(nFinger, 2) : (nFinger-1);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    </div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    planning_scene::PlanningScene planning_scene ( <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getRobotModel() );</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    collision_detection::CollisionRequest collision_request;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    collision_detection::CollisionResult collision_result;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    collision_request.contacts = <span class="keyword">true</span>;  <span class="comment">//set to compute collisions</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    collision_request.max_contacts = 1000;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    </div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="comment">// Consider only collisions among fingertips </span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">// If an object pair does not appear in the acm, it is assumed that collisions between those </span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">// objects is no tolerated. So we must fill it with all the nonFingertips</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    collision_detection::AllowedCollisionMatrix acm;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    acm.setEntry(<a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getRobotModel()-&gt;getLinkModelNames(), </div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                 <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getRobotModel()-&gt;getLinkModelNames(), <span class="keyword">true</span>); <span class="comment">//true==not considered collisions</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    acm.setEntry(<a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipNames(), </div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                 <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipNames(), <span class="keyword">false</span>); <span class="comment">//false== considered collisions</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    robot_state::RobotState kinematic_state(<a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getRobotModel());</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        </div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="FindActions_8h.html#a65ab596ea4fb33a100013056b62d4ef7">N_EXP_COLLISION_MULTPINCH</a>; i++){</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        </div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        collision_result.clear();</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <a class="code" href="classROSEE_1_1FindActions.html#a5331a455d5e499a01e0ad2e4af93d5b6">setToRandomPositions</a>(&amp;kinematic_state);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        planning_scene.checkSelfCollision(collision_request, collision_result, kinematic_state, acm);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        </div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">if</span> (collision_result.contacts.size() &gt;= nMinCollision ) { </div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        </div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="keywordtype">double</span> depthSum = 0;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            std::set &lt;std::string&gt; tipsColliding;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> cont : collision_result.contacts){</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                </div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                tipsColliding.insert(cont.first.first);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                tipsColliding.insert(cont.first.second);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                depthSum += std::abs(cont.second.at(0).depth);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            }</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            </div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            <span class="comment">//eg with 2 collision we can have 4 finger colliding because there are two</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <span class="comment">//normal distinct pinch and not a 3-pinch... so we exlude these collisions</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="keywordflow">if</span> (tipsColliding.size() != nFinger) {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                </div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            <span class="comment">//store joint states</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <a class="code" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> jointPos = <a class="code" href="classROSEE_1_1FindActions.html#ae2e1b6fa10b919efa6b18501ef43c618">getConvertedJointPos</a>(&amp;kinematic_state);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <a class="code" href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">JointsInvolvedCount</a> jointsInvolvedCount = <a class="code" href="classROSEE_1_1FindActions.html#a5d0468e304e350ccacc845f304c15011">setOnlyDependentJoints</a>(tipsColliding, &amp;jointPos);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            </div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="keyword">auto</span> fingerColliding = <a class="code" href="classROSEE_1_1FindActions.html#ac93535bb56de645f32ceeb74bcc70a4e">getFingersSet</a>(tipsColliding);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            ActionMultiplePinchTight pinch (fingerColliding, jointPos, depthSum );</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            pinch.setJointsInvolvedCount ( jointsInvolvedCount );</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keyword">auto</span> itFind = mapOfMultPinches.find ( fingerColliding );</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <span class="keywordflow">if</span> ( itFind == mapOfMultPinches.end() ) {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                <span class="comment">//if here, we have to create store the new created action</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                mapOfMultPinches.insert ( std::make_pair (fingerColliding, pinch) );</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            } <span class="keywordflow">else</span> { <span class="comment">//Check if it is the best depth among the found collision among that pair</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                <span class="keywordflow">if</span> (itFind-&gt;second.insertActionState( jointPos, depthSum ) ) {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                    <span class="comment">//print debug</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                    <span class="comment">//pring debug</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                }</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        }            </div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">return</span> mapOfMultPinches;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div><div class="ttc" id="namespaceROSEE_html_a2d8b470e322232ab96bc71c529edb040"><div class="ttname"><a href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">ROSEE::JointPos</a></div><div class="ttdeci">std::map&lt; std::string, std::vector&lt; double &gt; &gt; JointPos</div><div class="ttdoc">The map to describe the position of all actuated joints. </div><div class="ttdef"><b>Definition:</b> <a href="Action_8h_source.html#l00040">Action.h:40</a></div></div>
<div class="ttc" id="namespaceROSEE_html_aa3b40db1c90a37577a4efc8b3b159e7d"><div class="ttname"><a href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">ROSEE::JointsInvolvedCount</a></div><div class="ttdeci">std::map&lt; std::string, unsigned int &gt; JointsInvolvedCount</div><div class="ttdoc">The map to describe, how many times a joint is set by the action. </div><div class="ttdef"><b>Definition:</b> <a href="Action_8h_source.html#l00063">Action.h:63</a></div></div>
<div class="ttc" id="classROSEE_1_1ActionMultiplePinchTight_html"><div class="ttname"><a href="classROSEE_1_1ActionMultiplePinchTight.html">ROSEE::ActionMultiplePinchTight</a></div><div class="ttdoc">Class to describe the action of &quot;pinching&quot; with more than 2 tips (with 2 tips there is the ActionPinc...</div><div class="ttdef"><b>Definition:</b> <a href="ActionMultiplePinchTight_8h_source.html#l00048">ActionMultiplePinchTight.h:48</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
<div class="ttc" id="FindActions_8h_html_a65ab596ea4fb33a100013056b62d4ef7"><div class="ttname"><a href="FindActions_8h.html#a65ab596ea4fb33a100013056b62d4ef7">N_EXP_COLLISION_MULTPINCH</a></div><div class="ttdeci">#define N_EXP_COLLISION_MULTPINCH</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00020">FindActions.h:20</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_ae2e1b6fa10b919efa6b18501ef43c618"><div class="ttname"><a href="classROSEE_1_1FindActions.html#ae2e1b6fa10b919efa6b18501ef43c618">ROSEE::FindActions::getConvertedJointPos</a></div><div class="ttdeci">JointPos getConvertedJointPos(const robot_state::RobotState *kinematic_state)</div><div class="ttdoc">Utility function to take the actuated joint positions from a kinematic_state and returns the same inf...</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00705">FindActions.cpp:705</a></div></div>
<div class="ttc" id="namespaceROSEE_1_1Utils_html_aba8b2baa6146311f3b05224f84edef23"><div class="ttname"><a href="namespaceROSEE_1_1Utils.html#aba8b2baa6146311f3b05224f84edef23">ROSEE::Utils::binomial_coefficent</a></div><div class="ttdeci">static int binomial_coefficent(int n, int k)</div><div class="ttdef"><b>Definition:</b> <a href="Utils_8h_source.html#l00077">Utils.h:77</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a5331a455d5e499a01e0ad2e4af93d5b6"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a5331a455d5e499a01e0ad2e4af93d5b6">ROSEE::FindActions::setToRandomPositions</a></div><div class="ttdeci">void setToRandomPositions(robot_state::RobotState *kinematic_state)</div><div class="ttdoc">This function set the random position of joint considering: </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00826">FindActions.cpp:826</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a5d0468e304e350ccacc845f304c15011"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a5d0468e304e350ccacc845f304c15011">ROSEE::FindActions::setOnlyDependentJoints</a></div><div class="ttdeci">ROSEE::JointsInvolvedCount setOnlyDependentJoints(std::pair&lt; std::string, std::string &gt; tipsNames, JointPos *jPos)</div><div class="ttdoc">Given the contact, we want to know the state of the joint to replicate it. </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00746">FindActions.cpp:746</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_ac93535bb56de645f32ceeb74bcc70a4e"><div class="ttname"><a href="classROSEE_1_1FindActions.html#ac93535bb56de645f32ceeb74bcc70a4e">ROSEE::FindActions::getFingersSet</a></div><div class="ttdeci">std::set&lt; std::string &gt; getFingersSet(std::set&lt; std::string &gt; tipsSet) const </div><div class="ttdoc">Function used when looking for multiple pinches. </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00909">FindActions.cpp:909</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac19cc1727aa6c9a19aaee7f19e743032"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ROSEE::FindActions::checkDistances </td>
          <td>(</td>
          <td class="paramtype">std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a> &gt; *&#160;</td>
          <td class="paramname"><em>mapOfLoosePinches</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Principal function which fill the <code>mapOfLoosePinches</code> basing on minumun distance between tips. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mapOfLoosePinches</td><td>[out] pointer to the mapOfLoosePinches to be filled </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00334">334</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                                                                                                                           {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        </div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    robot_state::RobotState kinematic_state(<a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getRobotModel());</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        </div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="FindActions_8h.html#a594c6f866990da8353403ef94f9f4ac5">N_EXP_DISTANCES</a>; i++){</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        </div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <a class="code" href="classROSEE_1_1FindActions.html#a5331a455d5e499a01e0ad2e4af93d5b6">setToRandomPositions</a>(&amp;kinematic_state);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="comment">//for each pair remaining in notCollidingTips, check if a new min distance is found</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;mapEl : *mapOfLoosePinches) { </div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            </div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="comment">// restore all joint pos</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <a class="code" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> jointPosLoose = <a class="code" href="classROSEE_1_1FindActions.html#ae2e1b6fa10b919efa6b18501ef43c618">getConvertedJointPos</a>(&amp;kinematic_state);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            </div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="keyword">auto</span> tips = <a class="code" href="classROSEE_1_1FindActions.html#ac1b20ab5d24ddb2abf039292cb1fa5a6">getFingertipsPair</a>(mapEl.first);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            </div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <a class="code" href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">JointsInvolvedCount</a> jointsInvolvedCount = <a class="code" href="classROSEE_1_1FindActions.html#a5d0468e304e350ccacc845f304c15011">setOnlyDependentJoints</a>(tips, &amp;jointPosLoose);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            </div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            Eigen::Affine3d tip1Trasf = kinematic_state.getGlobalLinkTransform(tips.first);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            Eigen::Affine3d tip2Trasf = kinematic_state.getGlobalLinkTransform(tips.second);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <span class="keywordtype">double</span> distance = (tip1Trasf.translation() - tip2Trasf.translation() ) .norm() ;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                                </div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            mapEl.second.insertActionState( jointPosLoose, distance ) ;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            mapEl.second.setJointsInvolvedCount ( jointsInvolvedCount );</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div><div class="ttc" id="FindActions_8h_html_a594c6f866990da8353403ef94f9f4ac5"><div class="ttname"><a href="FindActions_8h.html#a594c6f866990da8353403ef94f9f4ac5">N_EXP_DISTANCES</a></div><div class="ttdeci">#define N_EXP_DISTANCES</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00019">FindActions.h:19</a></div></div>
<div class="ttc" id="namespaceROSEE_html_a2d8b470e322232ab96bc71c529edb040"><div class="ttname"><a href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">ROSEE::JointPos</a></div><div class="ttdeci">std::map&lt; std::string, std::vector&lt; double &gt; &gt; JointPos</div><div class="ttdoc">The map to describe the position of all actuated joints. </div><div class="ttdef"><b>Definition:</b> <a href="Action_8h_source.html#l00040">Action.h:40</a></div></div>
<div class="ttc" id="namespaceROSEE_html_aa3b40db1c90a37577a4efc8b3b159e7d"><div class="ttname"><a href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">ROSEE::JointsInvolvedCount</a></div><div class="ttdeci">std::map&lt; std::string, unsigned int &gt; JointsInvolvedCount</div><div class="ttdoc">The map to describe, how many times a joint is set by the action. </div><div class="ttdef"><b>Definition:</b> <a href="Action_8h_source.html#l00063">Action.h:63</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_ac1b20ab5d24ddb2abf039292cb1fa5a6"><div class="ttname"><a href="classROSEE_1_1FindActions.html#ac1b20ab5d24ddb2abf039292cb1fa5a6">ROSEE::FindActions::getFingertipsPair</a></div><div class="ttdeci">std::pair&lt; std::string, std::string &gt; getFingertipsPair(std::pair&lt; std::string, std::string &gt; fingersPair) const </div><div class="ttdoc">Given the fingersPair, this function return the pair of their fingers, in lexicographical order...</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00929">FindActions.cpp:929</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_ae2e1b6fa10b919efa6b18501ef43c618"><div class="ttname"><a href="classROSEE_1_1FindActions.html#ae2e1b6fa10b919efa6b18501ef43c618">ROSEE::FindActions::getConvertedJointPos</a></div><div class="ttdeci">JointPos getConvertedJointPos(const robot_state::RobotState *kinematic_state)</div><div class="ttdoc">Utility function to take the actuated joint positions from a kinematic_state and returns the same inf...</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00705">FindActions.cpp:705</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a5331a455d5e499a01e0ad2e4af93d5b6"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a5331a455d5e499a01e0ad2e4af93d5b6">ROSEE::FindActions::setToRandomPositions</a></div><div class="ttdeci">void setToRandomPositions(robot_state::RobotState *kinematic_state)</div><div class="ttdoc">This function set the random position of joint considering: </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00826">FindActions.cpp:826</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a5d0468e304e350ccacc845f304c15011"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a5d0468e304e350ccacc845f304c15011">ROSEE::FindActions::setOnlyDependentJoints</a></div><div class="ttdeci">ROSEE::JointsInvolvedCount setOnlyDependentJoints(std::pair&lt; std::string, std::string &gt; tipsNames, JointPos *jPos)</div><div class="ttdoc">Given the contact, we want to know the state of the joint to replicate it. </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00746">FindActions.cpp:746</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aea435622ef79d13cf11577cd009694da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ROSEE::FindActions::checkWhichTipsCollideWithoutBounds </td>
          <td>(</td>
          <td class="paramtype">std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a> &gt; *&#160;</td>
          <td class="paramname"><em>mapOfLoosePinches</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function similar to <a class="el" href="classROSEE_1_1FindActions.html#a30f514433db039df66f9df4ebf8c2f53">checkCollisions</a> but used for Loose Pinches. </p>
<p>First, we temporarily remove bounds of joints linked to the non-colliding tips (with <a class="el" href="classROSEE_1_1FindActions.html#ac7e8531675bfe6581764bf289fa7f4ac">removeBoundsOfNotCollidingTips</a>), and we check for collision with this function. If some collision are found, this means that tips movements make them go towards each other, (also with the bounds) but the joint limits do not permit them to touch. This is a loose pinch. If they do not collide even without bounds, this means that they never go towards each other, so this is not a tight neither loose pinch. We also create new kinematic_model object so we dont modify the original kinematic_model, and we can change the joint limits of the new copy safely</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mapOfLoosePinches</td><td>[out] map of loose pinches that will be filled with info about these particular actions </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00445">445</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                                                                                          {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    </div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    robot_model::RobotModelPtr kinematic_model_noBound = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getCopyModel();</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    </div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <a class="code" href="classROSEE_1_1FindActions.html#ac7e8531675bfe6581764bf289fa7f4ac">removeBoundsOfNotCollidingTips</a> (mapOfLoosePinches, kinematic_model_noBound );</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    collision_detection::AllowedCollisionMatrix acm;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    acm.setEntry(kinematic_model_noBound-&gt;getLinkModelNames(), </div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                 kinematic_model_noBound-&gt;getLinkModelNames(), <span class="keyword">true</span>); <span class="comment">//true == not considered collisions</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    </div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span>  it : *mapOfLoosePinches) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="comment">//we want to look for collision only on the pair inside the map</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="comment">//take the tip from the keys (that now are fingers)</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        std::string tip1 = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipOfFinger(it.first.first);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        std::string tip2 = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipOfFinger(it.first.second);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        acm.setEntry(tip1, tip2, <span class="keyword">false</span>); <span class="comment">//false == considered collisions   </span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    planning_scene::PlanningScene planning_scene(kinematic_model_noBound);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    collision_detection::CollisionRequest collision_request;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    collision_detection::CollisionResult collision_result;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    collision_request.contacts = <span class="keyword">true</span>;  <span class="comment">//set to compute collisions</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    collision_request.max_contacts = 1000;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    robot_state::RobotState kinematic_state(kinematic_model_noBound);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">// similar to checkcollisions here, but we dont want to store anything, only check if collision happen</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    std::set &lt; std::pair&lt;std::string, std::string&gt; &gt; collidingFingers ;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="FindActions_8h.html#afe393eb6f0261bf94bc886a6558c3973">N_EXP_COLLISION</a>; i++){</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        collision_result.clear();</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="classROSEE_1_1FindActions.html#a5331a455d5e499a01e0ad2e4af93d5b6">setToRandomPositions</a>(&amp;kinematic_state);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        planning_scene.checkSelfCollision(collision_request, collision_result, kinematic_state, acm);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        </div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> cont : collision_result.contacts){</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            <span class="comment">//moveit contacts is a map between a pair (2 strings with link names) and a vector of Contact object , so cont.first contain the pair of fingerTIPS which collide.</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            collidingFingers.insert ( <a class="code" href="classROSEE_1_1FindActions.html#ac5d2146904b7b7aa947cda5d60f6a9bf">getFingersPair</a> (cont.first) );   </div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">//erase from loose map the not colliding tips (: not colliding even without bounds)</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> mapEl = mapOfLoosePinches-&gt;cbegin(); mapEl != mapOfLoosePinches-&gt;cend() ; <span class="comment">/*no increment*/</span> ) {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordflow">if</span> (collidingFingers.count(mapEl-&gt;first) == 0 ) {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            mapOfLoosePinches-&gt;erase(mapEl++);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        } <span class="keywordflow">else</span> { </div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            ++mapEl;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    }</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div><div class="ttc" id="FindActions_8h_html_afe393eb6f0261bf94bc886a6558c3973"><div class="ttname"><a href="FindActions_8h.html#afe393eb6f0261bf94bc886a6558c3973">N_EXP_COLLISION</a></div><div class="ttdeci">#define N_EXP_COLLISION</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00018">FindActions.h:18</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_ac5d2146904b7b7aa947cda5d60f6a9bf"><div class="ttname"><a href="classROSEE_1_1FindActions.html#ac5d2146904b7b7aa947cda5d60f6a9bf">ROSEE::FindActions::getFingersPair</a></div><div class="ttdeci">std::pair&lt; std::string, std::string &gt; getFingersPair(std::pair&lt; std::string, std::string &gt; tipsPair) const </div><div class="ttdoc">Giving as argument a pair of fingertips, this function return a pair of fingers that are the fingers ...</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00887">FindActions.cpp:887</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_ac7e8531675bfe6581764bf289fa7f4ac"><div class="ttname"><a href="classROSEE_1_1FindActions.html#ac7e8531675bfe6581764bf289fa7f4ac">ROSEE::FindActions::removeBoundsOfNotCollidingTips</a></div><div class="ttdeci">void removeBoundsOfNotCollidingTips(const std::map&lt; std::pair&lt; std::string, std::string &gt;, ROSEE::ActionPinchLoose &gt; *mapOfLoosePinches, robot_model::RobotModelPtr kinematic_model_noBound)</div><div class="ttdoc">Support function to remove the joint limits from the model. </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00363">FindActions.cpp:363</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a5331a455d5e499a01e0ad2e4af93d5b6"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a5331a455d5e499a01e0ad2e4af93d5b6">ROSEE::FindActions::setToRandomPositions</a></div><div class="ttdeci">void setToRandomPositions(robot_state::RobotState *kinematic_state)</div><div class="ttdoc">This function set the random position of joint considering: </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00826">FindActions.cpp:826</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7141bfe37eec208d8d8ec4a46905414b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ROSEE::FindActions::fillNotCollidingTips </td>
          <td>(</td>
          <td class="paramtype">std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a> &gt; *&#160;</td>
          <td class="paramname"><em>mapOfLoosePinches</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchTight.html">ROSEE::ActionPinchTight</a> &gt; *&#160;</td>
          <td class="paramname"><em>mapOfPinches</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>function to "initialize" the map of <a class="el" href="classROSEE_1_1ActionPinchLoose.html" title="The action of pinch with two tips. ">ActionPinchLoose</a> <code>mapOfLoosePinches</code>. </p>
<p>It is done adding all the tips pairs and then removing the pairs that are present in the map of <a class="el" href="classROSEE_1_1ActionPinchTight.html" title="The action of pinch with two tips. ">ActionPinchTight</a> <code>mapOfPinches</code>. Note that the values of the map, the <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ActionPinchLoose</a> are action with only tips name (so no info right now).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mapOfLoosePinches</td><td>[out] Pointer to the map of <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ActionPinchLoose</a> to be initialized </td></tr>
    <tr><td class="paramname">mapOfPinches</td><td>[in] pointer to the map of <a class="el" href="classROSEE_1_1ActionPinchTight.html">ActionPinchTight</a>, already filled before, that is used to erase the get the tips that collide and to remove them from the <code>mapOfLoosePinches</code> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00719">719</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                                                                                           {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    </div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="comment">// first fill mapOfLoosePinches with all pairs ...</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">for</span> ( <span class="keyword">auto</span> fingerEl1 : <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipOfFingerMap() )  {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="keywordflow">for</span> ( <span class="keyword">auto</span> fingerEl2 : <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipOfFingerMap() ) { </div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            </div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            <span class="comment">// important to put in order in the pair, then in the set thing are autoordered</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="keywordflow">if</span> (fingerEl1.first &lt; fingerEl2.first) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                mapOfLoosePinches-&gt;insert (std::make_pair (std::make_pair (fingerEl1.first, fingerEl2.first), ActionPinchLoose(fingerEl1.first, fingerEl2.first)));</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                </div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fingerEl1.first &gt; fingerEl2.first) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                mapOfLoosePinches-&gt;insert (std::make_pair (std::make_pair (fingerEl2.first, fingerEl1.first), ActionPinchLoose(fingerEl2.first, fingerEl1.first)));</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            }    </div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    }  </div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    </div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="comment">// ... then remove all the colliding tips</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> mapEl : *mapOfPinches){</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        mapOfLoosePinches-&gt;erase(mapEl.first);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    }</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div><div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a868959109bf6094988ec01f364dc33be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; std::set&lt; std::string &gt;, <a class="el" href="classROSEE_1_1ActionMultiplePinchTight.html">ROSEE::ActionMultiplePinchTight</a> &gt; ROSEE::FindActions::findMultiplePinch </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nFinger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>path2saveYaml</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>strict</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finder for MultiplePinch (a pinch done with more than 2 finger). </p>
<p>This function return the found multpinch primitive but it also print this result in a yaml file. See <a class="el" href="classROSEE_1_1FindActions.html#ae461c8c4615de0f67eb471e82f7133b0">checkCollisionsForMultiplePinch</a> doc for more info.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nFinger</td><td>(2 &lt; nFinger &lt;= max_finger). The type of the multiple pinch that we want. The name of the returned action will be based on this param : "MultiplePinchTight-(nFinger)" </td></tr>
    <tr><td class="paramname">strict</td><td>true to look only for "strict" multiple pinch, i.e. where all tips collide with each other (and do not collide in "line") See <a class="el" href="classROSEE_1_1FindActions.html#ae461c8c4615de0f67eb471e82f7133b0">checkCollisionsForMultiplePinch</a> doc for more info. </td></tr>
    <tr><td class="paramname">path2saveYaml</td><td>the path where to create/overwrite the yaml files. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>map of founded <a class="el" href="classROSEE_1_1ActionMultiplePinchTight.html">ActionMultiplePinchTight</a>, </dd></dl>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00214">214</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                                                                                                                      {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    </div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    std::map&lt;std::set&lt;std::string&gt;, <a class="code" href="classROSEE_1_1ActionMultiplePinchTight.html">ROSEE::ActionMultiplePinchTight</a>&gt; multiplePinchMap;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span> (nFinger &lt; 3 ) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;[ERROR &quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;] for this find pass at least 3 as number &quot;</span> &lt;&lt;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="stringliteral">&quot; of fingertips for the pinch&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">return</span> multiplePinchMap;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    </div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    multiplePinchMap = <a class="code" href="classROSEE_1_1FindActions.html#ae461c8c4615de0f67eb471e82f7133b0">checkCollisionsForMultiplePinch</a>(nFinger, strict);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        </div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (multiplePinchMap.size() == 0 ) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">return</span> multiplePinchMap;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    std::map &lt; std::set &lt;std::string&gt; , ActionPrimitive* &gt; mapForWorker;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; it : multiplePinchMap) {  <span class="comment">// auto&amp; and not auto alone!</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        ActionPrimitive* pointer = &amp;(it.second);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        mapForWorker.insert (std::make_pair ( it.first, pointer ) );</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    </div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="classROSEE_1_1YamlWorker.html">ROSEE::YamlWorker</a> yamlWorker;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    yamlWorker.<a class="code" href="classROSEE_1_1YamlWorker.html#a6e01bbd4d271b823e8685b406bc9aa66">createYamlFile</a>(mapForWorker, multiplePinchMap.begin()-&gt;second.getName(), path2saveYaml);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    </div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">return</span> multiplePinchMap;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div><div class="ttc" id="classROSEE_1_1ActionMultiplePinchTight_html"><div class="ttname"><a href="classROSEE_1_1ActionMultiplePinchTight.html">ROSEE::ActionMultiplePinchTight</a></div><div class="ttdoc">Class to describe the action of &quot;pinching&quot; with more than 2 tips (with 2 tips there is the ActionPinc...</div><div class="ttdef"><b>Definition:</b> <a href="ActionMultiplePinchTight_8h_source.html#l00048">ActionMultiplePinchTight.h:48</a></div></div>
<div class="ttc" id="classROSEE_1_1YamlWorker_html"><div class="ttname"><a href="classROSEE_1_1YamlWorker.html">ROSEE::YamlWorker</a></div><div class="ttdef"><b>Definition:</b> <a href="YamlWorker_8h_source.html#l00047">YamlWorker.h:47</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_ae461c8c4615de0f67eb471e82f7133b0"><div class="ttname"><a href="classROSEE_1_1FindActions.html#ae461c8c4615de0f67eb471e82f7133b0">ROSEE::FindActions::checkCollisionsForMultiplePinch</a></div><div class="ttdeci">std::map&lt; std::set&lt; std::string &gt;, ROSEE::ActionMultiplePinchTight &gt; checkCollisionsForMultiplePinch(unsigned int nFinger, bool strict)</div><div class="ttdoc">support function for findMultiplePinch (a pinch done with more than 2 finger). </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00499">FindActions.cpp:499</a></div></div>
<div class="ttc" id="classROSEE_1_1YamlWorker_html_a6e01bbd4d271b823e8685b406bc9aa66"><div class="ttname"><a href="classROSEE_1_1YamlWorker.html#a6e01bbd4d271b823e8685b406bc9aa66">ROSEE::YamlWorker::createYamlFile</a></div><div class="ttdeci">std::string createYamlFile(const std::map&lt; std::set&lt; std::string &gt;, ActionPrimitive * &gt; mapOfActions, const std::string actionName, std::string pathFolder)</div><div class="ttdoc">Create/overwrite yaml file and emit info on it about each ActionPrimitive inside the given mapOfActio...</div><div class="ttdef"><b>Definition:</b> <a href="YamlWorker_8cpp_source.html#l00039">YamlWorker.cpp:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a85a70cb8d125f8130b0c0de0ce3704bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchTight.html">ROSEE::ActionPinchTight</a> &gt;, std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a> &gt; &gt; ROSEE::FindActions::findPinch </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>path2saveYaml</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to look for pinches, both Tight and Loose ones. </p>
<p>It fill the maps (returned as pair), but also print the infos in two yaml files (one for tight, one for loose) using a <a class="el" href="classROSEE_1_1YamlWorker.html">YamlWorker</a> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path2saveYaml</td><td>the path where to create/overwrite the yaml files. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pair of maps. The first is the map of <a class="el" href="classROSEE_1_1ActionPinchTight.html">ActionPinchTight</a>, the second the map of <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ActionPinchLoose</a> </dd></dl>
<p>EMITTING PART ................ </p>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00013">13</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;                                                                  {</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    </div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    std::map &lt; std::pair &lt;std::string, std::string&gt; , ActionPinchTight &gt; mapOfPinches = <a class="code" href="classROSEE_1_1FindActions.html#a30f514433db039df66f9df4ebf8c2f53">checkCollisions</a>();</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    std::map &lt; std::pair &lt;std::string, std::string&gt; , <a class="code" href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a> &gt; mapOfLoosePinches;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <a class="code" href="classROSEE_1_1FindActions.html#a7141bfe37eec208d8d8ec4a46905414b">fillNotCollidingTips</a>(&amp;mapOfLoosePinches, &amp;mapOfPinches);</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <a class="code" href="classROSEE_1_1FindActions.html#aea435622ef79d13cf11577cd009694da">checkWhichTipsCollideWithoutBounds</a> ( &amp;mapOfLoosePinches ) ;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="keywordflow">if</span> (mapOfLoosePinches.size() != 0 ){</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        <a class="code" href="classROSEE_1_1FindActions.html#ac19cc1727aa6c9a19aaee7f19e743032">checkDistances</a> (&amp;mapOfLoosePinches) ;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    }</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    </div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="keywordflow">if</span> (mapOfPinches.size() == 0 ) {  <span class="comment">//print if no collision at all</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: I found no collisions between tips. Are you sure your hand&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; has some fingertips that can collide? If yes, check your urdf/srdf, or be sure to&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; have set the mesh or some collision geometry for the links, or&quot;</span> </div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; set a bigger value in N_EXP_COLLISION&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            </div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    </div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <a class="code" href="classROSEE_1_1YamlWorker.html">ROSEE::YamlWorker</a> yamlWorker;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        std::map &lt; std::set &lt;std::string&gt; , ActionPrimitive* &gt; mapForWorker;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        </div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; it : mapOfPinches) {  <span class="comment">// auto&amp; and not auto alone!</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            ActionPrimitive* pointer = &amp;(it.second);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            std::set &lt; std::string &gt; keys ;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            keys.insert (it.first.first) ;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            keys.insert (it.first.second) ;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            mapForWorker.insert (std::make_pair ( keys, pointer ) );                </div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        }</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        yamlWorker.<a class="code" href="classROSEE_1_1YamlWorker.html#a6e01bbd4d271b823e8685b406bc9aa66">createYamlFile</a>(mapForWorker, <span class="stringliteral">&quot;pinchTight&quot;</span>, path2saveYaml);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    }</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    </div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">if</span> (mapOfLoosePinches.size() == 0 ) { </div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: I found no loose pinches. This mean that some error happened or that&quot;</span> &lt;&lt;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="stringliteral">&quot; all the tips pairs collide with each other for at least one hand configuration.&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        </div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        </div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <a class="code" href="classROSEE_1_1YamlWorker.html">ROSEE::YamlWorker</a> yamlWorker;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        std::map &lt; std::set &lt;std::string&gt; , ActionPrimitive* &gt; mapForWorker;  </div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        </div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; it : mapOfLoosePinches) {  <span class="comment">// auto&amp; and not auto alone!</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            ActionPrimitive* pointer = &amp;(it.second);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            std::set &lt; std::string &gt; keys ;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            keys.insert (it.first.first) ;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            keys.insert (it.first.second) ;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            mapForWorker.insert (std::make_pair ( keys, pointer ) );                </div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        yamlWorker.<a class="code" href="classROSEE_1_1YamlWorker.html#a6e01bbd4d271b823e8685b406bc9aa66">createYamlFile</a>(mapForWorker, <span class="stringliteral">&quot;pinchLoose&quot;</span>, path2saveYaml);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    </div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">return</span> std::make_pair(mapOfPinches, mapOfLoosePinches);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div><div class="ttc" id="classROSEE_1_1FindActions_html_ac19cc1727aa6c9a19aaee7f19e743032"><div class="ttname"><a href="classROSEE_1_1FindActions.html#ac19cc1727aa6c9a19aaee7f19e743032">ROSEE::FindActions::checkDistances</a></div><div class="ttdeci">void checkDistances(std::map&lt; std::pair&lt; std::string, std::string &gt;, ROSEE::ActionPinchLoose &gt; *mapOfLoosePinches)</div><div class="ttdoc">Principal function which fill the mapOfLoosePinches basing on minumun distance between tips...</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00334">FindActions.cpp:334</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_aea435622ef79d13cf11577cd009694da"><div class="ttname"><a href="classROSEE_1_1FindActions.html#aea435622ef79d13cf11577cd009694da">ROSEE::FindActions::checkWhichTipsCollideWithoutBounds</a></div><div class="ttdeci">void checkWhichTipsCollideWithoutBounds(std::map&lt; std::pair&lt; std::string, std::string &gt;, ROSEE::ActionPinchLoose &gt; *mapOfLoosePinches)</div><div class="ttdoc">Function similar to checkCollisions but used for Loose Pinches. </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00445">FindActions.cpp:445</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a30f514433db039df66f9df4ebf8c2f53"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a30f514433db039df66f9df4ebf8c2f53">ROSEE::FindActions::checkCollisions</a></div><div class="ttdeci">std::map&lt; std::pair&lt; std::string, std::string &gt;, ROSEE::ActionPinchTight &gt; checkCollisions()</div><div class="ttdoc">principal function which check for collisions with moveit functions when looking for tight pinches ...</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00249">FindActions.cpp:249</a></div></div>
<div class="ttc" id="classROSEE_1_1ActionPinchLoose_html"><div class="ttname"><a href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a></div><div class="ttdoc">The action of pinch with two tips. </div><div class="ttdef"><b>Definition:</b> <a href="ActionPinchLoose_8h_source.html#l00043">ActionPinchLoose.h:43</a></div></div>
<div class="ttc" id="classROSEE_1_1YamlWorker_html"><div class="ttname"><a href="classROSEE_1_1YamlWorker.html">ROSEE::YamlWorker</a></div><div class="ttdef"><b>Definition:</b> <a href="YamlWorker_8h_source.html#l00047">YamlWorker.h:47</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a7141bfe37eec208d8d8ec4a46905414b"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a7141bfe37eec208d8d8ec4a46905414b">ROSEE::FindActions::fillNotCollidingTips</a></div><div class="ttdeci">void fillNotCollidingTips(std::map&lt; std::pair&lt; std::string, std::string &gt;, ROSEE::ActionPinchLoose &gt; *mapOfLoosePinches, const std::map&lt; std::pair&lt; std::string, std::string &gt;, ROSEE::ActionPinchTight &gt; *mapOfPinches)</div><div class="ttdoc">function to &quot;initialize&quot; the map of ActionPinchLoose mapOfLoosePinches. </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00719">FindActions.cpp:719</a></div></div>
<div class="ttc" id="classROSEE_1_1YamlWorker_html_a6e01bbd4d271b823e8685b406bc9aa66"><div class="ttname"><a href="classROSEE_1_1YamlWorker.html#a6e01bbd4d271b823e8685b406bc9aa66">ROSEE::YamlWorker::createYamlFile</a></div><div class="ttdeci">std::string createYamlFile(const std::map&lt; std::set&lt; std::string &gt;, ActionPrimitive * &gt; mapOfActions, const std::string actionName, std::string pathFolder)</div><div class="ttdoc">Create/overwrite yaml file and emit info on it about each ActionPrimitive inside the given mapOfActio...</div><div class="ttdef"><b>Definition:</b> <a href="YamlWorker_8cpp_source.html#l00039">YamlWorker.cpp:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac10acdf095562888499f08e7e23ceb83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; std::string, <a class="el" href="classROSEE_1_1ActionSingleJointMultipleTips.html">ROSEE::ActionSingleJointMultipleTips</a> &gt; ROSEE::FindActions::findSingleJointMultipleTips </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nFinger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>path2saveYaml</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00137">137</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                                                                                                                                                  {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    </div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    std::map &lt;std::string, ROSEE::ActionSingleJointMultipleTips&gt; mapOfSingleJointMultipleTips;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    </div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (nFinger &lt;= 0) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[ERROR FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;] please pass a positive number &quot;</span> &lt;&lt; </div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="stringliteral">&quot; as number of fingers. You passed &quot;</span> &lt;&lt; nFinger &lt;&lt; <span class="stringliteral">&quot; ! &quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">return</span> mapOfSingleJointMultipleTips; </div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    </div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (nFinger == 1) {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[ERROR FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]  with 1 finger, you are looking for a ActionTrig, &quot;</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;and not a ActionSingleJointMultipleTips. Returning an empty map&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span> mapOfSingleJointMultipleTips;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    </div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (nFinger &gt; <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getNFingers() ) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[ERROR FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]  I can not find an action which moves &quot;</span> &lt;&lt; nFinger &lt;&lt; </div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="stringliteral">&quot; fingers if the hand has only &quot;</span> &lt;&lt; <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getNFingers() &lt;&lt; <span class="stringliteral">&quot; fingers. Returning an empty map&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">return</span> mapOfSingleJointMultipleTips;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;       </div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    std::string actionName = <span class="stringliteral">&quot;singleJointMultipleTips_&quot;</span> + std::to_string(nFinger); <span class="comment">//action name same for each action</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> mapEl : <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipsOfJointMap() ) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        </div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">if</span> (mapEl.second.size() != nFinger ) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        </div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        std::vector&lt;double&gt; furtherPos = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getBiggerBoundFromZero(mapEl.first);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        std::vector&lt;double&gt; nearerPos = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getSmallerBoundFromZero(mapEl.first);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        </div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="comment">//create and initialize JointPos map</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> jpFar;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> it : <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getActiveJointModels()){</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            std::vector &lt;double&gt; jPos (it-&gt;getVariableCount(), <a class="code" href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            jpFar.insert ( std::make_pair ( it-&gt;getName(), jPos ));</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <a class="code" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> jpNear = jpFar;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        </div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        jpFar.at ( mapEl.first ) = furtherPos;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        jpNear.at ( mapEl.first ) = nearerPos;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        </div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        std::vector&lt;std::string&gt; fingersInvolved;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> tip : mapEl.second){</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            fingersInvolved.push_back(<a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingerOfFingertip (tip) );</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        </div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        ActionSingleJointMultipleTips action (actionName, fingersInvolved, mapEl.first, jpFar, jpNear);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        </div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        mapOfSingleJointMultipleTips.insert (std::make_pair(mapEl.first, action));</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    </div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (mapOfSingleJointMultipleTips.size() == 0 ) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]  no singleJointMultipleTips with &quot;</span> &lt;&lt; nFinger &lt;&lt; <span class="stringliteral">&quot; found&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">return</span> mapOfSingleJointMultipleTips;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    </div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    std::map &lt; std::set &lt;std::string&gt; , ActionPrimitive* &gt; mapForWorker;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; it : mapOfSingleJointMultipleTips) {  <span class="comment">// auto&amp; and not auto alone!</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        ActionPrimitive* pointer = &amp;(it.second);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        std::set&lt;std::string&gt; <span class="keyword">set</span>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keyword">set</span>.insert (it.first);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        mapForWorker.insert (std::make_pair ( <span class="keyword">set</span>, pointer ) );</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    </div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="classROSEE_1_1YamlWorker.html">ROSEE::YamlWorker</a> yamlWorker;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    yamlWorker.<a class="code" href="classROSEE_1_1YamlWorker.html#a6e01bbd4d271b823e8685b406bc9aa66">createYamlFile</a>(mapForWorker, actionName, path2saveYaml);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    </div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">return</span> mapOfSingleJointMultipleTips;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div><div class="ttc" id="namespaceROSEE_html_a2d8b470e322232ab96bc71c529edb040"><div class="ttname"><a href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">ROSEE::JointPos</a></div><div class="ttdeci">std::map&lt; std::string, std::vector&lt; double &gt; &gt; JointPos</div><div class="ttdoc">The map to describe the position of all actuated joints. </div><div class="ttdef"><b>Definition:</b> <a href="Action_8h_source.html#l00040">Action.h:40</a></div></div>
<div class="ttc" id="classROSEE_1_1YamlWorker_html"><div class="ttname"><a href="classROSEE_1_1YamlWorker.html">ROSEE::YamlWorker</a></div><div class="ttdef"><b>Definition:</b> <a href="YamlWorker_8h_source.html#l00047">YamlWorker.h:47</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
<div class="ttc" id="classROSEE_1_1YamlWorker_html_a6e01bbd4d271b823e8685b406bc9aa66"><div class="ttname"><a href="classROSEE_1_1YamlWorker.html#a6e01bbd4d271b823e8685b406bc9aa66">ROSEE::YamlWorker::createYamlFile</a></div><div class="ttdeci">std::string createYamlFile(const std::map&lt; std::set&lt; std::string &gt;, ActionPrimitive * &gt; mapOfActions, const std::string actionName, std::string pathFolder)</div><div class="ttdoc">Create/overwrite yaml file and emit info on it about each ActionPrimitive inside the given mapOfActio...</div><div class="ttdef"><b>Definition:</b> <a href="YamlWorker_8cpp_source.html#l00039">YamlWorker.cpp:39</a></div></div>
<div class="ttc" id="FindActions_8h_html_adb298660bd634f12d27854263980b918"><div class="ttname"><a href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a></div><div class="ttdeci">#define DEFAULT_JOINT_POS</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00021">FindActions.h:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa6ed5639dd6cfde29f245cfc4a2d376c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; std::string, <a class="el" href="classROSEE_1_1ActionTrig.html">ROSEE::ActionTrig</a> &gt; ROSEE::FindActions::findTrig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classROSEE_1_1ActionPrimitive.html#a7c9f67521f5ae68df2a8252853b5f3ee">ROSEE::ActionPrimitive::Type</a>&#160;</td>
          <td class="paramname"><em>actionType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>path2saveYaml</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to look for trigs (trig, tipFlex and fingFlex). </p>
<p>The type of trig to be looked for is choosen thanks to the argument <code>actionType</code>. This function return the map of wanted trig but also print info about that on a yaml file using a <a class="el" href="classROSEE_1_1YamlWorker.html">YamlWorker</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">actionType</td><td>the type of trig to look for (Trig, TipFlex, FingFlex) </td></tr>
    <tr><td class="paramname">path2saveYaml</td><td>the path where to create/overwrite the yaml file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the map of chosen type of trig filled with infos about the possible actions. </dd></dl>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00073">73</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                             {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    </div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    std::map &lt;std::string, ActionTrig&gt; trigMap;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    </div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">switch</span> (actionType) {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">case</span> ROSEE::ActionPrimitive::Type::Trig : {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        trigMap = <a class="code" href="classROSEE_1_1FindActions.html#afc48c48e3f087744d53123cfb69b8866">trig</a>();</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">case</span> ROSEE::ActionPrimitive::Type::TipFlex : {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        trigMap = <a class="code" href="classROSEE_1_1FindActions.html#a8902b1bc633494a1f8acfb9ab9bfaedb">tipFlex</a>();</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">case</span> ROSEE::ActionPrimitive::Type::FingFlex : {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        trigMap = <a class="code" href="classROSEE_1_1FindActions.html#a1fb89f3655535412affb69319be096dd">fingFlex</a>();</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">default</span>: {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[ERROR FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: Passing as argument a action type which is not a type of trig. &quot;</span> &lt;&lt; std::endl </div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;I am returing an empty map&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">return</span> trigMap;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    }</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    </div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> (trigMap.size() == 0 ) { <span class="comment">//if so, no sense to continue</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">return</span> trigMap;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    </div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">//for involvedJoints. Ok here because I know that for the trigs, a non setted joint is </span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">//a joint which is in a default position</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp; mapEl : trigMap) {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="code" href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">ROSEE::JointsInvolvedCount</a> jointsInvolvedCount;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keywordflow">for</span> ( <span class="keyword">auto</span> joint : mapEl.second.getJointPos() ) {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            jointsInvolvedCount.insert (std::make_pair(joint.first, 0));</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> dof : joint.second) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <span class="keywordflow">if</span> (dof != <a class="code" href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a>){</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                    jointsInvolvedCount.at(joint.first) = 1;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                }</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            }            </div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        mapEl.second.setJointsInvolvedCount (jointsInvolvedCount);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        </div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    std::map &lt; std::set &lt;std::string&gt; , ActionPrimitive* &gt; mapForWorker;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; it : trigMap) {  <span class="comment">// auto&amp; and not auto alone!</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        ActionPrimitive* pointer = &amp;(it.second);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        std::set &lt; std::string &gt; keys ;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        keys.insert (it.first) ;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        mapForWorker.insert (std::make_pair ( keys, pointer ) );</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    </div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="classROSEE_1_1YamlWorker.html">ROSEE::YamlWorker</a> yamlWorker;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    yamlWorker.<a class="code" href="classROSEE_1_1YamlWorker.html#a6e01bbd4d271b823e8685b406bc9aa66">createYamlFile</a>(mapForWorker, trigMap.begin()-&gt;second.getName(), path2saveYaml);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">return</span> trigMap;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}  </div><div class="ttc" id="classROSEE_1_1FindActions_html_a8902b1bc633494a1f8acfb9ab9bfaedb"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a8902b1bc633494a1f8acfb9ab9bfaedb">ROSEE::FindActions::tipFlex</a></div><div class="ttdeci">std::map&lt; std::string, ROSEE::ActionTrig &gt; tipFlex()</div><div class="ttdoc">We start from each tip. </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00605">FindActions.cpp:605</a></div></div>
<div class="ttc" id="namespaceROSEE_html_aa3b40db1c90a37577a4efc8b3b159e7d"><div class="ttname"><a href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">ROSEE::JointsInvolvedCount</a></div><div class="ttdeci">std::map&lt; std::string, unsigned int &gt; JointsInvolvedCount</div><div class="ttdoc">The map to describe, how many times a joint is set by the action. </div><div class="ttdef"><b>Definition:</b> <a href="Action_8h_source.html#l00063">Action.h:63</a></div></div>
<div class="ttc" id="classROSEE_1_1YamlWorker_html"><div class="ttname"><a href="classROSEE_1_1YamlWorker.html">ROSEE::YamlWorker</a></div><div class="ttdef"><b>Definition:</b> <a href="YamlWorker_8h_source.html#l00047">YamlWorker.h:47</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a1fb89f3655535412affb69319be096dd"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a1fb89f3655535412affb69319be096dd">ROSEE::FindActions::fingFlex</a></div><div class="ttdeci">std::map&lt; std::string, ROSEE::ActionTrig &gt; fingFlex()</div><div class="ttdoc">We start from each tip. </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00637">FindActions.cpp:637</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_afc48c48e3f087744d53123cfb69b8866"><div class="ttname"><a href="classROSEE_1_1FindActions.html#afc48c48e3f087744d53123cfb69b8866">ROSEE::FindActions::trig</a></div><div class="ttdeci">std::map&lt; std::string, ActionTrig &gt; trig()</div><div class="ttdoc">trig is the action of closing a SINGLE finger towards the palm. </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00577">FindActions.cpp:577</a></div></div>
<div class="ttc" id="classROSEE_1_1YamlWorker_html_a6e01bbd4d271b823e8685b406bc9aa66"><div class="ttname"><a href="classROSEE_1_1YamlWorker.html#a6e01bbd4d271b823e8685b406bc9aa66">ROSEE::YamlWorker::createYamlFile</a></div><div class="ttdeci">std::string createYamlFile(const std::map&lt; std::set&lt; std::string &gt;, ActionPrimitive * &gt; mapOfActions, const std::string actionName, std::string pathFolder)</div><div class="ttdoc">Create/overwrite yaml file and emit info on it about each ActionPrimitive inside the given mapOfActio...</div><div class="ttdef"><b>Definition:</b> <a href="YamlWorker_8cpp_source.html#l00039">YamlWorker.cpp:39</a></div></div>
<div class="ttc" id="FindActions_8h_html_adb298660bd634f12d27854263980b918"><div class="ttname"><a href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a></div><div class="ttdeci">#define DEFAULT_JOINT_POS</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00021">FindActions.h:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1fb89f3655535412affb69319be096dd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; std::string, <a class="el" href="classROSEE_1_1ActionTrig.html">ROSEE::ActionTrig</a> &gt; ROSEE::FindActions::fingFlex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>We start from each tip. </p>
<p>Given a tip, we check if <a class="el" href="classROSEE_1_1ParserMoveIt.html#ab2f6d2c3890154eac38b21ec3534f06c">ParserMoveIt::getNExclusiveJointsOfTip</a> &gt;= 2 (see <a class="el" href="classROSEE_1_1FindActions.html#a8902b1bc633494a1f8acfb9ab9bfaedb">tipFlex</a> function). If so, we continue exploring the chain from the tip going up through the parents. We stop when a parent has more than 1 joint as child. This means that the last link is the first of the finger. Meanwhile we have stored the actuated, not continuos joint (in joint) that we were founding along the chain. The last stored is exaclty theInterestingJoint, which pose of we must set. All the other joints (actuated) will have the default position (if no strange errors). </p>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00637">637</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                                                               {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    </div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    std::map &lt;std::string, ROSEE::ActionTrig&gt; fingFlexMap;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    </div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> tipName : <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipNames() ) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        </div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getNExclusiveJointsOfTip ( tipName, <span class="keyword">false</span> ) &lt; 2 ) { </div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="comment">//if so, we have a simple trig (or none if 0) and not also a tip/finger flex</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        std::string theInterestingJoint = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFirstActuatedJointInFinger ( tipName );</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordtype">double</span> fingFlexMax = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getBiggerBoundFromZero ( theInterestingJoint ).at(0) ;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        ActionTrig action (<span class="stringliteral">&quot;fingFlex&quot;</span>, ActionPrimitive::Type::FingFlex);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        action.setFingerInvolved ( <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingerOfFingertip ( tipName) ) ;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">if</span> (! <a class="code" href="classROSEE_1_1FindActions.html#aebab07638c045644684c21df82314815">insertJointPosForTrigInMap</a>(fingFlexMap, action, theInterestingJoint, fingFlexMax) ) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <span class="comment">//if here, we have updated the joint position for a action that was already present in the map.</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="comment">//this is ok for normal trig because more joints are included in the action, but for the</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <span class="comment">//tipflex and fingflex for definition only a joint is involved (the active one farther from the tip</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <span class="comment">//but still inside the finger)</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;[FATAL ERROR FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: Inserting in fingFlexMap a tip already present??n&quot;</span> &lt;&lt; std::endl </div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;I am returning a not completely filled map&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="keywordflow">return</span> fingFlexMap;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        }</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">return</span> fingFlexMap;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;}</div><div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_aebab07638c045644684c21df82314815"><div class="ttname"><a href="classROSEE_1_1FindActions.html#aebab07638c045644684c21df82314815">ROSEE::FindActions::insertJointPosForTrigInMap</a></div><div class="ttdeci">bool insertJointPosForTrigInMap(std::map&lt; std::string, ActionTrig &gt; &amp;trigMap, ROSEE::ActionTrig action, std::string jointName, double trigValue)</div><div class="ttdoc">Insert/update an ActionTrig in the trigMap. </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00667">FindActions.cpp:667</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae2e1b6fa10b919efa6b18501ef43c618"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">ROSEE::JointPos</a> ROSEE::FindActions::getConvertedJointPos </td>
          <td>(</td>
          <td class="paramtype">const robot_state::RobotState *&#160;</td>
          <td class="paramname"><em>kinematic_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Utility function to take the actuated joint positions from a <code>kinematic_state</code> and returns the same info as a <a class="el" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> map. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kinematic_state</td><td>[in] pointer to the robot_state class </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JointPos the map with the joint positions info </dd></dl>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00705">705</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                                                                                                 {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    </div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <a class="code" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> jp;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">for</span> ( <span class="keyword">auto</span> actJ : <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getActiveJointModels()) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="comment">//joint can have multiple pos, so double*, but we want to store in a vector </span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span>* pos = kinematic_state-&gt;getJointPositions(actJ); </div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordtype">unsigned</span> posSize = <span class="keyword">sizeof</span>(pos) / <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        std::vector &lt;double&gt; vecPos(pos, pos + posSize);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        jp.insert(std::make_pair(actJ-&gt;getName(), vecPos));</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">return</span> jp;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;}</div><div class="ttc" id="namespaceROSEE_html_a2d8b470e322232ab96bc71c529edb040"><div class="ttname"><a href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">ROSEE::JointPos</a></div><div class="ttdeci">std::map&lt; std::string, std::vector&lt; double &gt; &gt; JointPos</div><div class="ttdoc">The map to describe the position of all actuated joints. </div><div class="ttdef"><b>Definition:</b> <a href="Action_8h_source.html#l00040">Action.h:40</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac5d2146904b7b7aa947cda5d60f6a9bf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; std::string, std::string &gt; ROSEE::FindActions::getFingersPair </td>
          <td>(</td>
          <td class="paramtype">std::pair&lt; std::string, std::string &gt;&#160;</td>
          <td class="paramname"><em>tipsPair</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Giving as argument a pair of fingertips, this function return a pair of fingers that are the fingers which the two tips belong to. </p>
<dl class="section return"><dt>Returns</dt><dd>a pair of string containing the fingers which the passed tips belong to </dd></dl>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00887">887</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                                                                                                              {</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    </div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    std::pair &lt;std::string, std::string&gt; fingersPair = std::make_pair (</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingerOfFingertip(tipsPair.first),</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingerOfFingertip(tipsPair.second)  );</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="comment">//So we have the key pair always in lexicographical order</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">if</span> ( fingersPair.first.compare (fingersPair.second) &gt; 0 ) {</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <span class="keyword">auto</span> temp = fingersPair.first;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        fingersPair.first = fingersPair.second;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        fingersPair.second = temp;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        </div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fingersPair.first.compare (fingersPair.second) == 0 ) {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[FINDACTIONS &quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;] STRANGE ERROR: &#39;&quot;</span> &lt;&lt; tipsPair.first &lt;&lt;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;          <span class="stringliteral">&quot;&#39; and &#39;&quot;</span> &lt;&lt; tipsPair.second &lt;&lt; <span class="stringliteral">&quot;&#39; are in the same finger &#39;&quot;</span> &lt;&lt; fingersPair.first &lt;&lt;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;          <span class="stringliteral">&quot;&#39; so this pair can&#39;t perform a pinch&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="keywordflow">return</span> std::pair&lt;std::string, std::string&gt;();</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    </div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">return</span> fingersPair;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div><div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac93535bb56de645f32ceeb74bcc70a4e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; std::string &gt; ROSEE::FindActions::getFingersSet </td>
          <td>(</td>
          <td class="paramtype">std::set&lt; std::string &gt;&#160;</td>
          <td class="paramname"><em>tipsSet</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used when looking for multiple pinches. </p>
<p>It returns the set containing the fingers of the passed fingertips. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tipsSet</td><td>the set of fingertips names </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the set of fingers. Empty set if the some tips in the tipsSet are in the same finger (that is an error) </dd></dl>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00909">909</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                                                                                    {</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    </div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    std::set &lt;std::string&gt; fingersSet;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it : tipsSet) {</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        </div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        fingersSet.insert ( <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingerOfFingertip ( it ) );</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    }</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="comment">//If size is less, there is a finger that we have try to insert more than once.</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">if</span> ( fingersSet.size() &lt; tipsSet.size() ) {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[FINDACTIONS &quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;] STRANGE ERROR: &quot;</span> &lt;&lt;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            <span class="stringliteral">&quot;the tipsSet passed has some fingertips that belong to the same finger.&quot;</span>  </div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; I will return an empty set &quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            </div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">return</span> std::set &lt;std::string&gt;();</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    </div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">return</span> fingersSet;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;}</div><div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac1b20ab5d24ddb2abf039292cb1fa5a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; std::string, std::string &gt; ROSEE::FindActions::getFingertipsPair </td>
          <td>(</td>
          <td class="paramtype">std::pair&lt; std::string, std::string &gt;&#160;</td>
          <td class="paramname"><em>fingersPair</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given the fingersPair, this function return the pair of their fingers, in lexicographical order. </p>
<dl class="section return"><dt>Returns</dt><dd>a pair of string containing the fingers which the passed tips belong to </dd></dl>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00929">929</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                                                                                                                    {</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    </div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    std::pair &lt;std::string, std::string&gt; tipsPair = std::make_pair (</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipOfFinger(fingersPair.first),</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipOfFinger(fingersPair.second)  );</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="comment">//So we have the key pair always in lexicographical order</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordflow">if</span> ( tipsPair.first.compare (tipsPair.second) &gt; 0 ) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="keyword">auto</span> temp = tipsPair.first;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        tipsPair.first = tipsPair.second;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        tipsPair.second = temp;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        </div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tipsPair.first.compare (tipsPair.second) == 0 ) {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[FINDACTIONS &quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;] STRANGE ERROR: &#39;&quot;</span> &lt;&lt; fingersPair.first &lt;&lt;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;          <span class="stringliteral">&quot;&#39; and &#39;&quot;</span> &lt;&lt; fingersPair.second &lt;&lt; <span class="stringliteral">&quot;&#39; have the same fingertip &#39;&quot;</span> &lt;&lt; tipsPair.first &lt;&lt;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;          <span class="stringliteral">&quot;&#39; so this pair can&#39;t perform a pinch&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <span class="keywordflow">return</span> std::pair&lt;std::string, std::string&gt;();</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    }</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    </div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">return</span> tipsPair;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;}</div><div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aebab07638c045644684c21df82314815"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ROSEE::FindActions::insertJointPosForTrigInMap </td>
          <td>(</td>
          <td class="paramtype">std::map&lt; std::string, <a class="el" href="classROSEE_1_1ActionTrig.html">ActionTrig</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>trigMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classROSEE_1_1ActionTrig.html">ROSEE::ActionTrig</a>&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>jointName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>trigValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Insert/update an <a class="el" href="classROSEE_1_1ActionTrig.html" title="The action of moving some joints (see later) of a single finger in a full clousure position towards t...">ActionTrig</a> in the <code>trigMap</code>. </p>
<p>This is done setting the <code>jointName</code> position to the given <code>jointName</code>. So, for a single action this function can be executed more than once (because more joint can be set). The <a class="el" href="classROSEE_1_1Action.html" title="The pure virtual class representing an Action. ">Action</a> <code>action</code> can be already present in the map; in this case it is updated setting the <code>jointName</code> position to the given <code>jointName</code>. If the <a class="el" href="classROSEE_1_1Action.html" title="The pure virtual class representing an Action. ">Action</a> <code>action</code> was not present before, it is inserted in the <code>trigMap</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trigMap</td><td>[out] The map of <a class="el" href="classROSEE_1_1ActionTrig.html" title="The action of moving some joints (see later) of a single finger in a full clousure position towards t...">ActionTrig</a> to be updated </td></tr>
    <tr><td class="paramname">action</td><td>The action involved in the updating </td></tr>
    <tr><td class="paramname">jointName</td><td>the name of the joint of the action that must be set </td></tr>
    <tr><td class="paramname">trigValue</td><td>the value of the position of the joint </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if <code>action</code> was not present before in the map and it is inserted now; FALSE if the action was already present and only the <code>jointName</code> value is updated to <code>trigValue</code> </dd></dl>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00667">667</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                                                                   {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    </div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keyword">auto</span> itMap = trigMap.find ( action.<a class="code" href="classROSEE_1_1ActionTrig.html#a9bad55a0a7d870f6fcc2b2c53a9b435b">getFingerInvolved</a>() );</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> ( itMap == trigMap.end() ) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <span class="comment">//still no action for this finger in the map</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <a class="code" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> jp;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> it : <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getActiveJointModels()){</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            std::vector &lt;double&gt; jPos (it-&gt;getVariableCount(), <a class="code" href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a>);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            jp.insert ( std::make_pair ( it-&gt;getName(), jPos ));</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        </div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="comment">//HACK at(0) because 1dof joint</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        jp.at ( jointName ).at(0) = trigValue;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        action.<a class="code" href="classROSEE_1_1ActionTrig.html#a8fe6c5fa9629fb97a1f999a629105abb">setJointPos</a>(jp);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        trigMap.insert ( std::make_pair ( action.<a class="code" href="classROSEE_1_1ActionTrig.html#a9bad55a0a7d870f6fcc2b2c53a9b435b">getFingerInvolved</a>(), action ) );</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="comment">//action already created, but we have to modify the position of a joint</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="comment">//itMap-&gt;second is an iterator to the already present element</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <a class="code" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> jp = itMap-&gt;second.getJointPos();</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="comment">//HACK at(0) because 1dof joint</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        jp.at (jointName).at(0) = trigValue;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        itMap-&gt;second.setJointPos(jp);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        </div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;}</div><div class="ttc" id="classROSEE_1_1ActionTrig_html_a8fe6c5fa9629fb97a1f999a629105abb"><div class="ttname"><a href="classROSEE_1_1ActionTrig.html#a8fe6c5fa9629fb97a1f999a629105abb">ROSEE::ActionTrig::setJointPos</a></div><div class="ttdeci">void setJointPos(JointPos)</div><div class="ttdef"><b>Definition:</b> <a href="ActionTrig_8cpp_source.html#l00043">ActionTrig.cpp:43</a></div></div>
<div class="ttc" id="namespaceROSEE_html_a2d8b470e322232ab96bc71c529edb040"><div class="ttname"><a href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">ROSEE::JointPos</a></div><div class="ttdeci">std::map&lt; std::string, std::vector&lt; double &gt; &gt; JointPos</div><div class="ttdoc">The map to describe the position of all actuated joints. </div><div class="ttdef"><b>Definition:</b> <a href="Action_8h_source.html#l00040">Action.h:40</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
<div class="ttc" id="classROSEE_1_1ActionTrig_html_a9bad55a0a7d870f6fcc2b2c53a9b435b"><div class="ttname"><a href="classROSEE_1_1ActionTrig.html#a9bad55a0a7d870f6fcc2b2c53a9b435b">ROSEE::ActionTrig::getFingerInvolved</a></div><div class="ttdeci">std::string getFingerInvolved() const </div><div class="ttdoc">Specific method of trig to simply return a string instead of the full vector fingersInvolved that in ...</div><div class="ttdef"><b>Definition:</b> <a href="ActionTrig_8cpp_source.html#l00031">ActionTrig.cpp:31</a></div></div>
<div class="ttc" id="FindActions_8h_html_adb298660bd634f12d27854263980b918"><div class="ttname"><a href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a></div><div class="ttdeci">#define DEFAULT_JOINT_POS</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00021">FindActions.h:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac7e8531675bfe6581764bf289fa7f4ac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ROSEE::FindActions::removeBoundsOfNotCollidingTips </td>
          <td>(</td>
          <td class="paramtype">const std::map&lt; std::pair&lt; std::string, std::string &gt;, <a class="el" href="classROSEE_1_1ActionPinchLoose.html">ROSEE::ActionPinchLoose</a> &gt; *&#160;</td>
          <td class="paramname"><em>mapOfLoosePinches</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">robot_model::RobotModelPtr&#160;</td>
          <td class="paramname"><em>kinematic_model_noBound</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Support function to remove the joint limits from the model. </p>
<p>This is done when looking for Loose Pinches. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mapOfLoosePinches</td><td>[in] pointer to the map of loose pinches </td></tr>
    <tr><td class="paramname">kinematic_model_noBound</td><td>the pointer to the robot model </td></tr>
  </table>
  </dd>
</dl>
<p>C++ Question: WHY if I use directly parser....at() in the for the string joint is corrupted? </p>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00363">363</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                                                      {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> mapEl : *mapOfLoosePinches ) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        </div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="comment">//for each joint of first tip...</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keyword">auto</span> tips = <a class="code" href="classROSEE_1_1FindActions.html#ac1b20ab5d24ddb2abf039292cb1fa5a6">getFingertipsPair</a>(mapEl.first);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keyword">auto</span> joints = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getJointsOfFingertipMap().at (tips.first);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">for</span> ( std::string joint : joints ) { </div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keyword">auto</span> jointModel = kinematic_model_noBound -&gt;getJointModel(joint);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keyword">auto</span> type = jointModel-&gt;getType() ;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordflow">if</span> (type == moveit::core::JointModel::REVOLUTE ) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <span class="comment">//at(0) because we are sure to have 1 dof being revolute</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                <span class="keyword">auto</span> bound = jointModel-&gt;getVariableBounds().at(0);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                bound.max_position_ = EIGEN_PI;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                bound.min_position_ = -EIGEN_PI;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                <span class="comment">//at(0) because we are sure to have 1 dof being revolute</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                jointModel-&gt;setVariableBounds ( jointModel-&gt;getVariableNames().at(0), bound );</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                </div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( type == moveit::core::JointModel::PRISMATIC ) {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                <span class="comment">// we cant set infinite here... lets double the limits?</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                std::cout &lt;&lt; <span class="stringliteral">&quot;[WARNING FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;] I am doubling the bounds for your prismatic joint &quot;</span> </div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;but I am not sure it is enough to make the tips colliding to find the loose pinches &quot;</span> &lt;&lt;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    std::endl;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                <span class="keyword">auto</span> bound = jointModel-&gt;getVariableBounds().at(0);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                bound.max_position_ *= 2;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                bound.min_position_ *= 2;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                <span class="comment">//at(0) because we are sure to have 1 dof being prismatic</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                jointModel-&gt;setVariableBounds ( jointModel-&gt;getVariableNames().at(0), bound );</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                </div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                    </div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                std::cout &lt;&lt; <span class="stringliteral">&quot;[FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;] Why are you using a type &quot;</span> </div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                    &lt;&lt; kinematic_model_noBound -&gt;getJointModel(joint)-&gt;getType()</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; joint? Code not ready to temporarily delete the multiple dof bounds&quot;</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; in the job done to find the loose pinches &quot;</span> &lt;&lt; std::endl &lt;&lt; std::endl;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                </div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        </div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="comment">//for each joint of second tip...</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keyword">auto</span> joints2 = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getJointsOfFingertipMap().at (tips.second);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">for</span> ( <span class="keyword">auto</span> joint : joints2 ) { </div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            </div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="keyword">auto</span> jointModel = kinematic_model_noBound -&gt;getJointModel(joint);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keyword">auto</span> type = jointModel-&gt;getType() ;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keywordflow">if</span> (type == moveit::core::JointModel::REVOLUTE ) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                <span class="comment">//at(0) because we are sure to have 1 dof being revolute</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                <span class="keyword">auto</span> bound = jointModel-&gt;getVariableBounds().at(0);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                bound.max_position_ = EIGEN_PI;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                bound.min_position_ = -EIGEN_PI;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <span class="comment">//at(0) because we are sure to have 1 dof being revolute</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                jointModel-&gt;setVariableBounds ( jointModel-&gt;getVariableNames().at(0), bound );</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                </div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( type == moveit::core::JointModel::PRISMATIC ) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                <span class="comment">// we cant set infinite here... lets double the limits?</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                std::cout &lt;&lt; <span class="stringliteral">&quot;[WARNING FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;] I am doubling the bounds for your prismatic joint &quot;</span> </div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;but I am not sure it is enough to make the tips colliding to find the loose pinches &quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                <span class="keyword">auto</span> bound = jointModel-&gt;getVariableBounds().at(0);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                bound.max_position_ *= 2;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                bound.min_position_ *= 2;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <span class="comment">//at(0) because we are sure to have 1 dof being revolute</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                jointModel-&gt;setVariableBounds ( jointModel-&gt;getVariableNames().at(0), bound );</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                </div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    </div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                std::cout &lt;&lt; <span class="stringliteral">&quot;[FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;] Why are you using a type &quot;</span> </div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    &lt;&lt; kinematic_model_noBound -&gt;getJointModel(joint)-&gt;getType()</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; joint? Code not ready to temporarily delete the multiple dof bounds&quot;</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; in the working done to find the loose pinches &quot;</span> &lt;&lt; std::endl &lt;&lt; std::endl;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                </div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div><div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_ac1b20ab5d24ddb2abf039292cb1fa5a6"><div class="ttname"><a href="classROSEE_1_1FindActions.html#ac1b20ab5d24ddb2abf039292cb1fa5a6">ROSEE::FindActions::getFingertipsPair</a></div><div class="ttdeci">std::pair&lt; std::string, std::string &gt; getFingertipsPair(std::pair&lt; std::string, std::string &gt; fingersPair) const </div><div class="ttdoc">Given the fingersPair, this function return the pair of their fingers, in lexicographical order...</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00929">FindActions.cpp:929</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5d0468e304e350ccacc845f304c15011"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">ROSEE::JointsInvolvedCount</a> ROSEE::FindActions::setOnlyDependentJoints </td>
          <td>(</td>
          <td class="paramtype">std::pair&lt; std::string, std::string &gt;&#160;</td>
          <td class="paramname"><em>tipsNames</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> *&#160;</td>
          <td class="paramname"><em>jPos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given the contact, we want to know the state of the joint to replicate it. </p>
<p>But we want to know only the state of the joints that effectively act on the contact, that are the ones which moves one of the two tips (or both). So the other joints are put to the DEFAULT_JOINT_POS value </p><dl class="section return"><dt>Returns</dt><dd>JointsInvolvedCount, the map where each element is relative at one joint (joint name is the key). The value is the number of times that joint is used, for primitive actions can be only 0 or 1 </dd></dl>
<p>other way around, second is better? std::vector &lt;std::string&gt; jointOfTips1 = jointsOfFingertipMap.at(tipsNames.first); std::vector &lt;std::string&gt; jointOfTips2 = jointsOfFingertipMap.at(tipsNames.second);</p>
<p>if the joint is not linked with neither of the two colliding tips... if ( std::find( jointOfTips1.begin(), jointOfTips1.end(), jp.first) == jointOfTips1.end() &amp;&amp; std::find( jointOfTips2.begin(), jointOfTips2.end(), jp.first) == jointOfTips2.end() ) {</p>
<p>std::fill ( jp.second.begin(), jp.second.end(), DEFAULT_JOINT_POS);</p>
<p>IF USE THIS JOINTINVOLVEDCOUNT REMEMBER }</p>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00746">746</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                                                                {</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    </div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <a class="code" href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">JointsInvolvedCount</a> jointsInvolvedCount;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    </div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;jp : *jPos) { <span class="comment">//for each among ALL joints</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        </div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        jointsInvolvedCount.insert ( std::make_pair (jp.first, 1) );</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        </div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="comment">//the tips of the joint</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        std::vector &lt; std::string&gt; tips = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipsOfJointMap().at(jp.first); </div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        </div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="comment">//check if the two tips that collide are among the ones that the joint moves</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">if</span> (std::find (tips.begin(), tips.end(), tipsNames.first) == tips.end() &amp;&amp;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            std::find (tips.begin(), tips.end(), tipsNames.second) == tips.end() ) {</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <span class="comment">// not dependant, set to default the position</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            std::fill ( jp.second.begin(), jp.second.end(), <a class="code" href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a>); </div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            jointsInvolvedCount.at ( jp.first ) = 0;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        }</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    } </div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    </div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">return</span> jointsInvolvedCount;    </div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;}</div><div class="ttc" id="namespaceROSEE_html_aa3b40db1c90a37577a4efc8b3b159e7d"><div class="ttname"><a href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">ROSEE::JointsInvolvedCount</a></div><div class="ttdeci">std::map&lt; std::string, unsigned int &gt; JointsInvolvedCount</div><div class="ttdoc">The map to describe, how many times a joint is set by the action. </div><div class="ttdef"><b>Definition:</b> <a href="Action_8h_source.html#l00063">Action.h:63</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
<div class="ttc" id="FindActions_8h_html_adb298660bd634f12d27854263980b918"><div class="ttname"><a href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a></div><div class="ttdeci">#define DEFAULT_JOINT_POS</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00021">FindActions.h:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a512ae13abb9d5249689b0b11d02f8f18"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">ROSEE::JointsInvolvedCount</a> ROSEE::FindActions::setOnlyDependentJoints </td>
          <td>(</td>
          <td class="paramtype">std::set&lt; std::string &gt;&#160;</td>
          <td class="paramname"><em>tipsNames</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> *&#160;</td>
          <td class="paramname"><em>jPos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set to default pos the joints that do not move any of the tip included in the set. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tipsNames.</td><td>Used by <a class="el" href="classROSEE_1_1FindActions.html#a868959109bf6094988ec01f364dc33be">findMultiplePinch</a> function </td></tr>
    <tr><td class="paramname">tipsNames</td><td>the tips involved </td></tr>
    <tr><td class="paramname">jPos</td><td>pointer to the map <a class="el" href="namespaceROSEE.html#a2d8b470e322232ab96bc71c529edb040">JointPos</a> with value to be setted if necessary </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JointsInvolvedCount map, where value are 0 or 1 according to the usage of joint </dd></dl>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00785">785</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                                                   {</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    </div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <a class="code" href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">JointsInvolvedCount</a> jointsInvolvedCount;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    </div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;jp : *jPos) { <span class="comment">//for each among ALL joints</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        </div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        jointsInvolvedCount.insert ( std::make_pair (jp.first, 0) );</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        </div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="comment">//the tips of the joint</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        std::vector &lt; std::string&gt; tips = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipsOfJointMap().at(jp.first); </div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        </div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="comment">// if at least one tip of tipsNames is moved by jp.first joint, set the counter</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="comment">// and break the loop (because useless to continue</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="comment">// if no tip of tipsNames is moved by the joint, the count remain to zero and the </span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="comment">// for ends normally</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">for</span> ( <span class="keyword">auto</span> fingInv : tipsNames ) {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            <span class="keywordflow">if</span> (std::find (tips.begin(), tips.end(), fingInv) != tips.end()) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                jointsInvolvedCount.at ( jp.first )  = 1 ;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            }</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        }</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        </div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">if</span> (jointsInvolvedCount.at ( jp.first ) == 0 ) {</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            std::fill ( jp.second.begin(), jp.second.end(), <a class="code" href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a>); </div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            <span class="comment">//not used joint, set to default state (all its dof)</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    } </div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">return</span> jointsInvolvedCount;    </div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;}</div><div class="ttc" id="namespaceROSEE_html_aa3b40db1c90a37577a4efc8b3b159e7d"><div class="ttname"><a href="namespaceROSEE.html#aa3b40db1c90a37577a4efc8b3b159e7d">ROSEE::JointsInvolvedCount</a></div><div class="ttdeci">std::map&lt; std::string, unsigned int &gt; JointsInvolvedCount</div><div class="ttdoc">The map to describe, how many times a joint is set by the action. </div><div class="ttdef"><b>Definition:</b> <a href="Action_8h_source.html#l00063">Action.h:63</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
<div class="ttc" id="FindActions_8h_html_adb298660bd634f12d27854263980b918"><div class="ttname"><a href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a></div><div class="ttdeci">#define DEFAULT_JOINT_POS</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00021">FindActions.h:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a781fb80ad06e438bcdd88c9459d67a70"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ROSEE::FindActions::setToDefaultPositionPassiveJoints </td>
          <td>(</td>
          <td class="paramtype">moveit::core::RobotState *&#160;</td>
          <td class="paramname"><em>kinematic_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set to <a class="el" href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a> all the passive joints (defined so in the urdf file). </p>
<p>this is necessary because moveit setToRandomPositions modify the position of passive joints, we do not want that </p>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00817">817</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                                                                                               {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    </div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> pos = <a class="code" href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a>; <span class="comment">//idk why but setJointPositions want a pointer as 2nd arg</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> joint : <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getPassiveJointNames()){</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        kinematic_state-&gt;setJointPositions(joint, &amp;pos);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    }</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    </div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div><div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
<div class="ttc" id="FindActions_8h_html_adb298660bd634f12d27854263980b918"><div class="ttname"><a href="FindActions_8h.html#adb298660bd634f12d27854263980b918">DEFAULT_JOINT_POS</a></div><div class="ttdeci">#define DEFAULT_JOINT_POS</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00021">FindActions.h:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5331a455d5e499a01e0ad2e4af93d5b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ROSEE::FindActions::setToRandomPositions </td>
          <td>(</td>
          <td class="paramtype">robot_state::RobotState *&#160;</td>
          <td class="paramname"><em>kinematic_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function set the random position of joint considering: </p>
<ul>
<li>Non linear mimic joint relationship, if present</li>
<li>Passive joints, which default position will be assured</li>
<li>Positional limit of also mimic joint will be enforced</li>
</ul>
<p>These three things are not present in the moveit setToRandomPositions. So we use the moveit one but then we change a bit the things. </p>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00826">826</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                                                                                  {</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="comment">//NOTE this function will consider the mimic LINEAR. if in mimic tag only nlFunPos is written, default LINEAR args are </span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="comment">//considered : multiplier 1 and offset 0. Then the joint which mimic someone will have same position of father, it is not</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="comment">// an error of randomic. Also, this is not a problem for us because below we overwrite the mimic sons, and we keep only </span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="comment">// the random pos of actuated joints.</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    kinematic_state-&gt;setToRandomPositions();</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    </div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="comment">//when setting a joint pos (also a single one) moveit call also updateMimic using the standard linear params</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="comment">//we cant take the single functions inside the setJoint pos of moveit, because are private, so we</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="comment">//must always bear the updateMimic. So, here the joint pos of nonlinear mimic joint are ovewritten</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="comment">//with the correct non linear function</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    </div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classROSEE_1_1FindActions.html#ab51478600e8d0f0b4b55cdfa4baa0c14">mimicNLRelMap</a>.size() &gt; 0 ) { <span class="comment">//necessary if we have the for immediately after? faster?</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        </div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> el : <a class="code" href="classROSEE_1_1FindActions.html#ab51478600e8d0f0b4b55cdfa4baa0c14">mimicNLRelMap</a>) {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            </div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <span class="keywordtype">double</span> mimPos = 0;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            </div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                <span class="comment">//HACK single dof joint</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                <span class="keywordtype">double</span> fatherPos = kinematic_state-&gt;getJointPositions(el.second.first)[0];</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                </div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                mu::Parser p;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                <span class="comment">//we assume that there is always a x in the expression</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                p.DefineVar(<span class="stringliteral">&quot;x&quot;</span>, &amp;fatherPos);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                p.SetExpr(el.second.second);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                mimPos = p.Eval();</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            }</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <span class="keywordflow">catch</span> (mu::Parser::exception_type &amp;e)</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            {</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                std::cout &lt;&lt; e.GetMsg() &lt;&lt; std::endl;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                std::cout &lt;&lt; <span class="stringliteral">&quot;[FINDACTIONS &quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;] Parsing of non linear function for mimic joint &quot;</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; el.first &lt;&lt; <span class="stringliteral">&quot;&#39;. Please be sure to put characther &#39;x&#39; as (unique) variable for father position&quot;</span> </div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;in the expression. Have you used syntax valid for muparser?. Expression found: &#39;&quot;</span> </div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                 &lt;&lt; el.second.second &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                 </div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                 exit(-1); <span class="comment">//TODO is it good to use exit?</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                </div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            }</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            </div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <span class="comment">//HACK single dof joint</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            std::vector&lt;double&gt; one_dof ;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            one_dof.push_back(mimPos);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            </div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            <span class="comment">//we enforce the bounds, in this way. calling at the end kinematic_state-&gt;enforceBounds() call internally updateMimicJoint</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            <span class="comment">//and we would have again problems.</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;            kinematic_state-&gt;getJointModel(el.first)-&gt;enforcePositionBounds(one_dof.data());</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            kinematic_state-&gt;setJointPositions(el.first, one_dof);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                  </div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        }</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        </div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        </div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    }</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    </div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <a class="code" href="classROSEE_1_1FindActions.html#a781fb80ad06e438bcdd88c9459d67a70">setToDefaultPositionPassiveJoints</a>(kinematic_state);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div><div class="ttc" id="classROSEE_1_1FindActions_html_ab51478600e8d0f0b4b55cdfa4baa0c14"><div class="ttname"><a href="classROSEE_1_1FindActions.html#ab51478600e8d0f0b4b55cdfa4baa0c14">ROSEE::FindActions::mimicNLRelMap</a></div><div class="ttdeci">std::map&lt; std::string, std::pair&lt; std::string, std::string &gt; &gt; mimicNLRelMap</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00087">FindActions.h:87</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_a781fb80ad06e438bcdd88c9459d67a70"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a781fb80ad06e438bcdd88c9459d67a70">ROSEE::FindActions::setToDefaultPositionPassiveJoints</a></div><div class="ttdeci">void setToDefaultPositionPassiveJoints(moveit::core::RobotState *kinematic_state)</div><div class="ttdoc">set to DEFAULT_JOINT_POS all the passive joints (defined so in the urdf file). </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00817">FindActions.cpp:817</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8902b1bc633494a1f8acfb9ab9bfaedb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; std::string, <a class="el" href="classROSEE_1_1ActionTrig.html">ROSEE::ActionTrig</a> &gt; ROSEE::FindActions::tipFlex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>We start from each tip. </p>
<p>Given a tip, we look for all the joints that move this tip. If it has 2 or more joints that move exclusively that tip ( we count this number with <a class="el" href="classROSEE_1_1ParserMoveIt.html#ab2f6d2c3890154eac38b21ec3534f06c">ParserMoveIt::getNExclusiveJointsOfTip</a> ), we say that a tipFlex is possible. If not, we can't move the tip independently from the rest of the finger, so we have a trig action (if <a class="el" href="classROSEE_1_1ParserMoveIt.html#ab2f6d2c3890154eac38b21ec3534f06c">ParserMoveIt::getNExclusiveJointsOfTip</a> returns 1 ) or nothing (<a class="el" href="classROSEE_1_1ParserMoveIt.html#ab2f6d2c3890154eac38b21ec3534f06c">ParserMoveIt::getNExclusiveJointsOfTip</a> returns 0). If <a class="el" href="classROSEE_1_1ParserMoveIt.html#ab2f6d2c3890154eac38b21ec3534f06c">ParserMoveIt::getNExclusiveJointsOfTip</a> return &gt;= 2, starting from the tip, we explore the parents joints, until we found the first actuated joint. This one will be theInterestingJoint which pose we must set. All the other joints (actuated) will have the default position (if no strange errors). </p><dl class="section return"><dt>Returns</dt><dd>std::map &lt;std::string, <a class="el" href="classROSEE_1_1ActionTrig.html" title="The action of moving some joints (see later) of a single finger in a full clousure position towards t...">ROSEE::ActionTrig</a>&gt; the map witch key the tip/finger and as value its ActionTipFlex </dd></dl>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00605">605</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                                              {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    </div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    std::map &lt;std::string, ROSEE::ActionTrig&gt; tipFlexMap;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    </div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> tipName : <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipNames() ) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getNExclusiveJointsOfTip ( tipName, <span class="keyword">false</span> ) &lt; 2 ) { </div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="comment">//if so, we have a simple trig (or none if 0) and not also a tip/finger flex</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        }</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        std::string theInterestingJoint = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFirstActuatedParentJoint ( tipName, <span class="keyword">false</span> );</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordtype">double</span> tipFlexMax = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getBiggerBoundFromZero ( theInterestingJoint ).at(0) ;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        </div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        </div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        ActionTrig action (<span class="stringliteral">&quot;tipFlex&quot;</span>, ActionPrimitive::Type::TipFlex);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        action.setFingerInvolved (<a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingerOfFingertip(tipName)) ;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">if</span> (! <a class="code" href="classROSEE_1_1FindActions.html#aebab07638c045644684c21df82314815">insertJointPosForTrigInMap</a>(tipFlexMap, action, theInterestingJoint, tipFlexMax) ) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <span class="comment">//if here, we have updated the joint position for a action that was already present in the map.</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="comment">//this is ok for normal trig because more joints are included in the action, but for the</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <span class="comment">//tipflex and fingflex for definition only a joint is involved (the active one nearer to the tip)</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;[FATAL ERROR FINDACTIONS::&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: Inserting in tipFlexMap a tip already present??&quot;</span> &lt;&lt; std::endl </div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;I am returning a not completely filled map&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <span class="keywordflow">return</span> tipFlexMap;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        }</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">return</span> tipFlexMap;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;}</div><div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_aebab07638c045644684c21df82314815"><div class="ttname"><a href="classROSEE_1_1FindActions.html#aebab07638c045644684c21df82314815">ROSEE::FindActions::insertJointPosForTrigInMap</a></div><div class="ttdeci">bool insertJointPosForTrigInMap(std::map&lt; std::string, ActionTrig &gt; &amp;trigMap, ROSEE::ActionTrig action, std::string jointName, double trigValue)</div><div class="ttdoc">Insert/update an ActionTrig in the trigMap. </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00667">FindActions.cpp:667</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afc48c48e3f087744d53123cfb69b8866"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; std::string, <a class="el" href="classROSEE_1_1ActionTrig.html">ROSEE::ActionTrig</a> &gt; ROSEE::FindActions::trig </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>trig is the action of closing a SINGLE finger towards the palm. </p>
<p>The position is the bound which is farther from 0 (considered as default pos). All hands have more range of motion in the flexion respect to extension (as human finger). NOT valid for other motion, like finger spread or thumb addition/abduction. </p><dl class="section note"><dt>Note</dt><dd>If a joint is continuos, it is excluded from the trig action. (because I cant think about a continuos joint that is useful for a trig action, but can be present in theory) </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>std::map &lt;std::string, <a class="el" href="classROSEE_1_1ActionTrig.html" title="The action of moving some joints (see later) of a single finger in a full clousure position towards t...">ROSEE::ActionTrig</a>&gt; the map witch key the tip/finger and as value its <a class="el" href="classROSEE_1_1ActionTrig.html" title="The action of moving some joints (see later) of a single finger in a full clousure position towards t...">ActionTrig</a> </dd></dl>
<p>Go in the max range </p>

<p>Definition at line <a class="el" href="FindActions_8cpp_source.html#l00577">577</a> of file <a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                                                           {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    std::map &lt;std::string, ActionTrig&gt; trigMap;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> mapEl : <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingertipsOfJointMap()) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        </div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">if</span> (mapEl.second.size() != 1) { <span class="comment">//the joint must move ONLY a fingertip</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        </div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;checkIfContinuosJoint(mapEl.first) == true ) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <span class="keywordflow">continue</span>; <span class="comment">//we dont want to use a continuos joint for the trig</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordtype">double</span> trigMax = <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getBiggerBoundFromZero(mapEl.first).at(0) ;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        ActionTrig action (<span class="stringliteral">&quot;trig&quot;</span>, ActionPrimitive::Type::Trig);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        action.setFingerInvolved ( <a class="code" href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">parserMoveIt</a>-&gt;getFingerOfFingertip( mapEl.second.at(0)) ) ;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="comment">// mapEl.second.at(0) : sure to have only 1 element for the if before</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <a class="code" href="classROSEE_1_1FindActions.html#aebab07638c045644684c21df82314815">insertJointPosForTrigInMap</a>(trigMap, action, mapEl.first, trigMax); </div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    </div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">return</span> trigMap;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div><div class="ttc" id="classROSEE_1_1FindActions_html_a4896943527c13a92d19e94ed4bd8cdd9"><div class="ttname"><a href="classROSEE_1_1FindActions.html#a4896943527c13a92d19e94ed4bd8cdd9">ROSEE::FindActions::parserMoveIt</a></div><div class="ttdeci">std::shared_ptr&lt; ROSEE::ParserMoveIt &gt; parserMoveIt</div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8h_source.html#l00084">FindActions.h:84</a></div></div>
<div class="ttc" id="classROSEE_1_1FindActions_html_aebab07638c045644684c21df82314815"><div class="ttname"><a href="classROSEE_1_1FindActions.html#aebab07638c045644684c21df82314815">ROSEE::FindActions::insertJointPosForTrigInMap</a></div><div class="ttdeci">bool insertJointPosForTrigInMap(std::map&lt; std::string, ActionTrig &gt; &amp;trigMap, ROSEE::ActionTrig action, std::string jointName, double trigValue)</div><div class="ttdoc">Insert/update an ActionTrig in the trigMap. </div><div class="ttdef"><b>Definition:</b> <a href="FindActions_8cpp_source.html#l00667">FindActions.cpp:667</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ab51478600e8d0f0b4b55cdfa4baa0c14"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, std::pair&lt;std::string, std::string&gt; &gt; ROSEE::FindActions::mimicNLRelMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FindActions_8h_source.html#l00087">87</a> of file <a class="el" href="FindActions_8h_source.html">FindActions.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4896943527c13a92d19e94ed4bd8cdd9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classROSEE_1_1ParserMoveIt.html">ROSEE::ParserMoveIt</a> &gt; ROSEE::FindActions::parserMoveIt</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FindActions_8h_source.html#l00084">84</a> of file <a class="el" href="FindActions_8h_source.html">FindActions.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/travis/build/ADVRHumanoids/ROSEndEffector/include/end_effector/<a class="el" href="FindActions_8h_source.html">FindActions.h</a></li>
<li>/home/travis/build/ADVRHumanoids/ROSEndEffector/src/<a class="el" href="FindActions_8cpp_source.html">FindActions.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jan 5 2023 08:06:40 for ROSEndEffector by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
