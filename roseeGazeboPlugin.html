

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ROS End-Effector Gazebo Plugins &mdash; ROSEndEffector 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Possible Issues" href="issues.html" />
    <link rel="prev" title="ROS End-Effector GUI" href="roseeGui.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ROSEndEffector
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">How to use ROS End-Effector with your End-Effector</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Ready to use examples with tested hands</a></li>
</ul>
<p class="caption"><span class="caption-text">Components</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="actions.html">ROS End-Effector Grasping Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="nodes.html">FindActions &amp; Executor node</a></li>
<li class="toctree-l1"><a class="reference internal" href="roseeGui.html">ROS End-Effector GUI</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ROS End-Effector Gazebo Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#generic-information">Generic Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mimic-joints">Mimic Joints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#prepare-your-model-for-gazebo">Prepare your Model for Gazebo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-install">How to Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-run">How to Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced">Advanced</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#change-more-params-with-dynamic-reconfigurator">Change more params with Dynamic Reconfigurator</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="issues.html">Possible Issues</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="googleTests.html">How to run the google tests present in the package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ROSEndEffector</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>ROS End-Effector Gazebo Plugins</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/roseeGazeboPlugin.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ros-end-effector-gazebo-plugins">
<span id="roseegazeboplugin"></span><h1>ROS End-Effector Gazebo Plugins<a class="headerlink" href="#ros-end-effector-gazebo-plugins" title="Permalink to this headline">¶</a></h1>
<p>This package is an utility to help end effector dynamic simulation with Gazebo.
It is hosted on <em>github</em> <a class="reference external" href="https://github.com/ADVRHumanoids/rosee_gazebo_plugins">here</a>.</p>
<div class="section" id="generic-information">
<h2>Generic Information<a class="headerlink" href="#generic-information" title="Permalink to this headline">¶</a></h2>
<p>It is very similar to the “official” ROS package for control : <a class="reference external" href="http://gazebosim.org/tutorials/?tut=ros_control">gazebo_ros_control</a>.</p>
<p>It includes a gazebo plugin to take commands (<em>references</em>) from <strong>/ros_end_effector/joint_states</strong> topic and use to move the simulated robot in gazebo. The same plugin also publish the “real” joint States (derived by the gazebo simulation) in the topic <strong>/rosee_gazebo_plugin/joint_states</strong>.</p>
<p><strong>Take care:</strong> In <strong>/ros_end_effector/joint_states</strong> topic there are state for only some joints (and never for not actuated ones); while in <strong>/rosee_gazebo_plugin/joint_states</strong> there are state for ALL non-fixed joints, always, included not actuated (i.e. mimic). This may change in future, but for now I leave as it is because returning also mimic joints is not so a problem.</p>
<p>At the moment each joint can be commanded in position or in velocity, using the <em>SetPositionTarget()</em> and <em>SetVelocityTarget()</em> of gazebo. Gains (pid) are settable in a config file (see later for istructions).</p>
<p>There is also a ROS node, <em>rosee_gazebo_plugin_DynReconfigure</em> which create <em>dynamic_reconfigure</em> servers to give the possibility to change the PID params during the simulation.</p>
<div class="section" id="mimic-joints">
<h3>Mimic Joints<a class="headerlink" href="#mimic-joints" title="Permalink to this headline">¶</a></h3>
<p>Thanks to the <a class="reference external" href="https://github.com/roboticsgroup/roboticsgroup_gazebo_plugins">mimic_joint_plugin</a> (and to <a class="reference external" href="https://github.com/mintar/mimic_joint_gazebo_tutorial">mimic_joint_gazebo_tutorial</a> to understand how to use it), now also mimic joints work correctly. The argument <em>set_pid</em> of this plugin should be set to false, because otherwise a pid controller is used, that is the “default” gazebo one (see plugin page for more info). And also when mimicking, we want to reply exactly the angle of the other joint (or not?). See above how to deal with this plugin if your urdf model has some mimic joint</p>
</div>
</div>
<div class="section" id="prepare-your-model-for-gazebo">
<span id="prepare4gazebo"></span><h2>Prepare your Model for Gazebo<a class="headerlink" href="#prepare-your-model-for-gazebo" title="Permalink to this headline">¶</a></h2>
<p>You need additional steps on your <em>.urdf</em> file to make Gazebo simulation works.</p>
<ul>
<li><p class="first">Be sure to have an urdf file ready for gazebo <a class="reference external" href="http://gazebosim.org/tutorials/?tut=ros_urdf">info here</a>.
Also add in your <em>.urdf</em> :</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;gazebo&gt;</span>
  <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">&quot;SOMENAME&quot;</span> <span class="na">filename=</span><span class="s">&quot;librosee_plugin.so&quot;</span><span class="nt">&gt;</span> <span class="nt">&lt;/plugin&gt;</span>
<span class="nt">&lt;/gazebo&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">Create new <em>YOURROBOTNAME_control.yaml</em> file in <em>rosee_gazebo_plugins/configs</em> folder, following the examples present there. Note that supported controllers <em>type</em> are <em>JointPositionController</em> and <em>JointVelocityController</em>, but for now ROS End-Effector only send position reference (so use <em>JointPositionController</em> for now)</p>
<p><strong>NOTE</strong> In future this file will probably be shifted somewhere else and pointed with a config file.
<span class="raw-html"><br /></span>
<span class="raw-html"><br /></span></p>
</li>
<li><p class="first"><strong>Important</strong> If your urdf file has some mimic joint, you have to add a <a class="reference external" href="https://github.com/roboticsgroup/roboticsgroup_gazebo_plugins">mimic_joint_plugin</a> for each mimic joint. See <a class="reference external" href="https://github.com/ADVRHumanoids/rosee_gazebo_plugins/blob/master/configs/urdf/two_finger_mimic.urdf.xacro">two_finger_mimic.urdf.xacro</a> file or <a class="reference external" href="https://github.com/mintar/mimic_joint_gazebo_tutorial">mimic_joint_gazebo_tutorial</a> for example on how to use the plugin</p>
</li>
</ul>
</div>
<div class="section" id="how-to-install">
<h2>How to Install<a class="headerlink" href="#how-to-install" title="Permalink to this headline">¶</a></h2>
<p><strong>NOTE</strong> You probably already installed this if you have followed the steps in <a class="reference internal" href="install.html#install"><span class="std std-ref">Install</span></a> section</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone https://github.com/roboticsgroup/roboticsgroup_gazebo_plugins.git #necessary external plugin</span>
<span class="go">git clone -b &lt;branch_you_want&gt; https://github.com/ADVRHumanoids/rosee_gazebo_plugins.git</span>

<span class="go">compile with catkin_make</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-run">
<h2>How to Run<a class="headerlink" href="#how-to-run" title="Permalink to this headline">¶</a></h2>
<p>To run ROS End-Effector as a whole, follow the guide in <a class="reference internal" href="usage.html#usage"><span class="std std-ref">How to use ROS End-Effector with your End-Effector</span></a> section.</p>
<ul>
<li><p class="first">Anyway, ROS End-Effector Gazebo Plugins is a package that run independently, so you can also launch it alone:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">roslaunch rosee_gazebo_plugins twofinger.launch</span>
</pre></div>
</div>
</li>
<li><p class="first">To run the dynamic reconfigurator:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rosrun rosee_gazebo_plugins DynReconfigure two_finger</span>
</pre></div>
</div>
</li>
<li><p class="first">Also useful</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rqt</span>
</pre></div>
</div>
<p>And set it to have things like that, for example to tune the gains:</p>
<a class="reference internal image-reference" href="_images/rqt.png"><img alt="rqt gui" src="_images/rqt.png" style="width: 700px;" /></a>
</li>
</ul>
</div>
<div class="section" id="advanced">
<h2>Advanced<a class="headerlink" href="#advanced" title="Permalink to this headline">¶</a></h2>
<p>Advanced section only for the braves</p>
<div class="section" id="change-more-params-with-dynamic-reconfigurator">
<h3>Change more params with Dynamic Reconfigurator<a class="headerlink" href="#change-more-params-with-dynamic-reconfigurator" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Check the ros tutorials about that ( <a class="reference external" href="http://wiki.ros.org/dynamic_reconfigure/Tutorials">here</a> )</li>
<li>Add (or extend) config files in <em>rosee_gazebo_plugins/cfg</em> folder</li>
<li>Check the DynReconfigure code in <em>src/DynReconfigure</em></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="issues.html" class="btn btn-neutral float-right" title="Possible Issues" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="roseeGui.html" class="btn btn-neutral float-left" title="ROS End-Effector GUI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Davide Torielli

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>